const e={ID:"token-action-hud-ironsworn"},o={ID:"foundry-ironsworn"},t={ID:"token-action-hud-core"},n="2.0",s={stat:"IRONSWORN.Stats",legacy:"IRONSWORN.Legacies",meter:"tokenActionHud.ironsworn.meters",impact:"IRONSWORN.Impacts",utility:"tokenActionHud.utility",moveClassic:"IRONSWORN.ITEMS.TypeMove IRONSWORN.RULESETS.classic",moveDelve:"IRONSWORN.ITEMS.TypeMove IRONSWORN.RULESETS.delve",moveStarforged:"IRONSWORN.ITEMS.TypeMove IRONSWORN.RULESETS.starforged",moveSunderedIsles:"IRONSWORN.ITEMS.TypeMove IRONSWORN.RULESETS.sundered_isles",combatPosition:"tokenActionHud.combatPosition"},r={stat:{id:"stat",name:"IRONSWORN.Stats",type:"system"},quest:{id:"quest",name:"IRONSWORN.LEGACY.Quests",type:"system"},bond:{id:"bond",name:"IRONSWORN.LEGACY.Bonds",type:"system"},discovery:{id:"discovery",name:"IRONSWORN.LEGACY.Discoveries",type:"system"},momentum:{id:"momentum",name:"IRONSWORN.Momentum",type:"system"},health:{id:"health",name:"IRONSWORN.Health",type:"system"},spirit:{id:"spirit",name:"IRONSWORN.Spirit",type:"system"},supply:{id:"supply",name:"IRONSWORN.Supply",type:"system"},hold:{id:"hold",name:"IRONSWORN.Hold",type:"system"},progress:{id:"progress",name:"IRONSWORN.ITEMS.SubtypeProgress",type:"system"},vow:{id:"vow",name:"IRONSWORN.ITEMS.SubtypeVow",type:"system"},bondset:{id:"bondset",name:"IRONSWORN.ITEMS.TypeBond",type:"system"},connection:{id:"connection",name:"IRONSWORN.ITEMS.SubtypeConnection",type:"system"},path:{id:"path",name:"IRONSWORN.Asset Categories.Starforged.Path Assets.Title",type:"system"},companion:{id:"companion",name:"IRONSWORN.Asset Categories.Starforged.Companion Assets.Title",type:"system"},deed:{id:"deed",name:"IRONSWORN.Asset Categories.Starforged.Deed Assets.Title",type:"system"},module:{id:"module",name:"IRONSWORN.Asset Categories.Starforged.Module Assets.Title",type:"system"},supportVehicle:{id:"supportVehicle",name:"IRONSWORN.Asset Categories.Starforged.Support Vehicle Assets.Title",type:"system"},commandVehicle:{id:"commandVehicle",name:"IRONSWORN.Asset Categories.Starforged.Command Vehicle Assets.Title",type:"system"},ritual:{id:"ritual",name:"IRONSWORN.Asset Categories.Classic.Ritual Assets.Title",type:"system"},combatTalent:{id:"combatTalent",name:"IRONSWORN.Asset Categories.Classic.Combat Talent Assets.Title",type:"system"},misfortune:{id:"misfortune",name:"IRONSWORN.IMPACT.CATEGORY.Misfortunes",type:"system"},lastingEffect:{id:"lastingEffect",name:"IRONSWORN.IMPACT.CATEGORY.LastingEffects",type:"system"},burden:{id:"burden",name:"IRONSWORN.IMPACT.CATEGORY.Burdens",type:"system"},vehicleTrouble:{id:"vehicleTrouble",name:"IRONSWORN.IMPACT.CATEGORY.Vehicle",type:"system"},bane:{id:"bane",name:"IRONSWORN.DEBILITY.CATEGORY.Banes",type:"system"},condition:{id:"condition",name:"IRONSWORN.DEBILITY.CATEGORY.Conditions",type:"system"},utility:{id:"utility",name:"tokenActionHud.utility",type:"system"},sessionMoveStarforged:{id:"sessionMoveStarforged",name:"IRONSWORN.MOVES.Session Moves",type:"system"},adventureMoveStarforged:{id:"adventureMoveStarforged",name:"IRONSWORN.MOVES.Adventure Moves",type:"system"},questMoveStarforged:{id:"questMoveStarforged",name:"IRONSWORN.MOVES.Quest Moves",type:"system"},connectionMoveStarforged:{id:"connectionMoveStarforged",name:"IRONSWORN.MOVES.Connection Moves",type:"system"},explorationMoveStarforged:{id:"explorationMoveStarforged",name:"IRONSWORN.MOVES.Exploration Moves",type:"system"},combatMoveStarforged:{id:"combatMoveStarforged",name:"IRONSWORN.MOVES.Combat Moves",type:"system"},sufferMoveStarforged:{id:"sufferMoveStarforged",name:"IRONSWORN.MOVES.Suffer Moves",type:"system"},recoverMoveStarforged:{id:"recoverMoveStarforged",name:"IRONSWORN.MOVES.Recover Moves",type:"system"},thresholdMoveStarforged:{id:"thresholdMoveStarforged",name:"IRONSWORN.MOVES.Threshold Moves",type:"system"},legacyMoveStarforged:{id:"legacyMoveStarforged",name:"IRONSWORN.MOVES.Legacy Moves",type:"system"},fateMoveStarforged:{id:"fateMoveStarforged",name:"IRONSWORN.MOVES.Fate Moves",type:"system"},sceneChallengeMoveStarforged:{id:"sceneChallengeMoveStarforged",name:"IRONSWORN.MOVES.Scene Challenge Moves",type:"system"},explorationMoveSunderedIsles:{id:"explorationMoveSunderedIsles",name:"IRONSWORN.MOVES.Exploration Moves",type:"system"},combatMoveSunderedIsles:{id:"combatMoveSunderedIsles",name:"IRONSWORN.MOVES.Combat Moves",type:"system"},sufferMoveSunderedIsles:{id:"sufferMoveSunderedIsles",name:"IRONSWORN.MOVES.Suffer Moves",type:"system"},recoverMoveSunderedIsles:{id:"recoverMoveSunderedIsles",name:"IRONSWORN.MOVES.Recover Moves",type:"system"},adventureMoveClassic:{id:"adventureMoveClassic",name:"IRONSWORN.MOVES.Adventure Moves",type:"system"},relationshipMoveClassic:{id:"relationshipMoveClassic",name:"IRONSWORN.MOVES.Relationship Moves",type:"system"},combatMoveClassic:{id:"combatMoveClassic",name:"IRONSWORN.MOVES.Combat Moves",type:"system"},sufferMoveClassic:{id:"sufferMoveClassic",name:"IRONSWORN.MOVES.Suffer Moves",type:"system"},questMoveClassic:{id:"questMoveClassic",name:"IRONSWORN.MOVES.Quest Moves",type:"system"},fateMoveClassic:{id:"fateMoveClassic",name:"IRONSWORN.MOVES.Fate Moves",type:"system"},delveMoveDelve:{id:"delveMoveDelve",name:"IRONSWORN.MOVES.Delve Moves",type:"system"},failureMoveDelve:{id:"failureMoveDelve",name:"IRONSWORN.MOVES.Failure Moves",type:"system"},threatMoveDelve:{id:"threatMoveDelve",name:"IRONSWORN.MOVES.Threat Moves",type:"system"},rarityMoveDelve:{id:"rarityMoveDelve",name:"IRONSWORN.MOVES.Rarity Moves",type:"system"},combatPosition:{id:"combatPosition",name:"tokenActionHud.combatPosition",type:"system"}},i={asset:{groupId:"asset"},progress:{groupId:"progress"},connection:{groupId:"connection"},vow:{groupId:"vow"},bondset:{groupId:"bondset"},path:{groupId:"path"},companion:{groupId:"companion"},ritual:{groupId:"ritual"},deed:{groupId:"deed"},module:{groupId:"module"},commandVehicle:{groupId:"commandVehicle"},supportVehicle:{groupId:"supportVehicle"},combatTalent:{groupId:"combatTalent"}},a={edge:{name:"IRONSWORN.Edge",description:"tokenActionHud.ironsworn.stats.edge.description"},heart:{name:"IRONSWORN.Heart",description:"tokenActionHud.ironsworn.stats.heart.description"},iron:{name:"IRONSWORN.Iron",description:"tokenActionHud.ironsworn.stats.iron.description"},shadow:{name:"IRONSWORN.Shadow",description:"tokenActionHud.ironsworn.stats.shadow.description"},wits:{name:"IRONSWORN.Wits",description:"tokenActionHud.ironsworn.stats.wits.description"}},d={quests:{name:"IRONSWORN.LEGACY.Quests",groupId:"quest"},questsIncrease:{name:"tokenActionHud.ironsworn.markProgress",groupId:"quest"},bonds:{name:"IRONSWORN.LEGACY.Bonds",groupId:"bond"},bondsIncrease:{name:"IRONSWORN.MarkProgress",groupId:"bond"},discoveries:{name:"IRONSWORN.LEGACY.Discoveries",groupId:"discovery"},discoveriesIncrease:{name:"IRONSWORN.MarkProgress",groupId:"discovery"}},m={healthDecrease:{name:"‚è¥",groupId:"health",description:""},health:{name:"IRONSWORN.Health",groupId:"health",description:"tokenActionHud.ironsworn.condition_meters.health.description"},healthIncrease:{name:"‚èµ",groupId:"health",description:""},spiritDecrease:{name:"‚è¥",groupId:"spirit",description:""},spirit:{name:"IRONSWORN.Spirit",groupId:"spirit",description:"tokenActionHud.ironsworn.condition_meters.spirit.description"},spiritIncrease:{name:"‚èµ",groupId:"spirit",description:""},supplyDecrease:{name:"‚è¥",groupId:"supply",description:""},supply:{name:"IRONSWORN.Supply",groupId:"supply",description:"tokenActionHud.ironsworn.condition_meters.supply.description"},supplyIncrease:{name:"‚èµ",groupId:"supply",description:""},momentumDecrease:{name:"‚è¥",groupId:"momentum",description:""},momentum:{name:"IRONSWORN.Momentum",groupId:"momentum",description:""},momentumIncrease:{name:"‚èµ",groupId:"momentum",description:""},momentumReset:{name:"tokenActionHud.ironsworn.momentum.reset",groupId:"momentum",description:""},momentumMax:{name:"tokenActionHud.ironsworn.momentum.max",groupId:"momentum",description:""}},c={healthDecrease:{name:"‚è¥",groupId:"health",description:""},health:{name:"IRONSWORN.Health",groupId:"health",description:"tokenActionHud.ironsworn.condition_meters.health.description"},healthIncrease:{name:"‚èµ",groupId:"health",description:""},spiritDecrease:{name:"‚è¥",groupId:"spirit",description:""},spirit:{name:"IRONSWORN.Spirit",groupId:"spirit",description:"tokenActionHud.ironsworn.condition_meters.spirit.description"},spiritIncrease:{name:"‚èµ",groupId:"spirit",description:""},supplyDecrease:{name:"‚è¥",groupId:"supply",description:""},supply:{name:"IRONSWORN.Supply",groupId:"supply",description:"tokenActionHud.ironsworn.condition_meters.supply.description"},supplyIncrease:{name:"‚èµ",groupId:"supply",description:""},holdDecrease:{name:"‚è¥",groupId:"hold"},hold:{name:"IRONSWORN.Hold",groupId:"hold",description:"tokenActionHud.ironsworn.condition_meters.hold.description"},holdIncrease:{name:"‚èµ",groupId:"hold",description:""},momentumDecrease:{name:"‚è¥",groupId:"momentum",description:""},momentum:{name:"IRONSWORN.Momentum",groupId:"momentum",description:"tokenActionHud.ironsworn.condition_meters.momentum.description"},momentumIncrease:{name:"‚èµ",groupId:"momentum",description:""},momentumReset:{name:"tokenActionHud.ironsworn.momentum.reset",groupId:"momentum",description:""},momentumMax:{name:"tokenActionHud.ironsworn.momentum.max",groupId:"momentum",description:""}},u={wounded:{name:"IRONSWORN.IMPACT.Wounded",groupId:"misfortune",description:"tokenActionHud.ironsworn.starforged.misfortunes.contents.wounded.description"},shaken:{name:"IRONSWORN.IMPACT.Shaken",groupId:"misfortune",description:"tokenActionHud.ironsworn.starforged.misfortunes.contents.shaken.description"},unprepared:{name:"IRONSWORN.IMPACT.Unprepared",groupId:"misfortune",description:"tokenActionHud.ironsworn.starforged.misfortunes.contents.unprepared.description"},permanentlyharmed:{name:"IRONSWORN.IMPACT.Permanentlyharmed",groupId:"lastingEffect",description:"tokenActionHud.ironsworn.starforged.lasting_effects.contents.permanently_harmed.description"},traumatized:{name:"IRONSWORN.IMPACT.Traumatized",groupId:"lastingEffect",description:"tokenActionHud.ironsworn.starforged.lasting_effects.contents.traumatized.description"},doomed:{name:"IRONSWORN.IMPACT.Doomed",groupId:"burden",description:"tokenActionHud.ironsworn.starforged.burdens.contents.doomed.description"},tormented:{name:"IRONSWORN.IMPACT.Tormented",groupId:"burden",description:"tokenActionHud.ironsworn.starforged.burdens.contents.tormented.description"},indebted:{name:"IRONSWORN.IMPACT.Indebted",groupId:"burden",description:"tokenActionHud.ironsworn.starforged.burdens.contents.indebted.description"},battered:{name:"IRONSWORN.IMPACT.Battered",groupId:"vehicleTrouble",description:"tokenActionHud.ironsworn.starforged.vehicle_troubles.contents.battered.description"},cursed:{name:"IRONSWORN.IMPACT.Cursed",groupId:"vehicleTrouble",description:"tokenActionHud.ironsworn.starforged.vehicle_troubles.contents.cursed.description"}},p={wounded:{name:"IRONSWORN.DEBILITY.Wounded",groupId:"condition",description:"tokenActionHud.ironsworn.ironsworn.conditions.contents.wounded.description"},unprepared:{name:"IRONSWORN.DEBILITY.Unprepared",groupId:"condition",description:"tokenActionHud.ironsworn.ironsworn.conditions.contents.unprepared.description"},shaken:{name:"IRONSWORN.DEBILITY.Shaken",groupId:"condition",description:"tokenActionHud.ironsworn.ironsworn.conditions.contents.shaken.description"},encumbered:{name:"IRONSWORN.DEBILITY.Encumbered",groupId:"condition",description:"tokenActionHud.ironsworn.ironsworn.conditions.contents.encumbered.description"},maimed:{name:"IRONSWORN.DEBILITY.Maimed",groupId:"bane",description:"tokenActionHud.ironsworn.ironsworn.banes.contents.maimed.description"},corrupted:{name:"IRONSWORN.DEBILITY.Corrupted",groupId:"bane",description:"tokenActionHud.ironsworn.ironsworn.banes.contents.corrupted.description"},cursed:{name:"IRONSWORN.DEBILITY.Cursed",groupId:"burden",description:"tokenActionHud.ironsworn.ironsworn.burdens.contents.cursed.description"},tormented:{name:"IRONSWORN.DEBILITY.Tormented",groupId:"burden",description:"tokenActionHud.ironsworn.ironsworn.burdens.contents.tormented.description"}},l={battered:{name:"IRONSWORN.IMPACT.Battered",groupId:"vehicleTrouble",description:"tokenActionHud.ironsworn.vehicle_troubles.contents.battered.description"},cursed:{name:"IRONSWORN.IMPACT.Cursed",groupId:"vehicleTrouble",description:"tokenActionHud.ironsworn.vehicle_troubles.contents.cursed.description"}},I={inControl:{name:"tokenActionHud.ironsworn.combatPosition.inControl.name",groupId:"combatPosition",description:"tokenActionHud.ironsworn.combatPosition.inControl.description"},inABadSpot:{name:"tokenActionHud.ironsworn.combatPosition.inABadSpot.name",groupId:"combatPosition",description:"tokenActionHud.ironsworn.combatPosition.inABadSpot.description"},none:{name:"tokenActionHud.ironsworn.combatPosition.none.name",groupId:"combatPosition",description:"tokenActionHud.ironsworn.combatPosition.none.description"}},g={faceDanger:{name:"Face Danger",groupId:"adventureMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.c8bacc17f73d3103",actionTypeId:"moveClassic"},gatherInformation:{name:"Gather Information",groupId:"adventureMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.4244b77103f55bc4",actionTypeId:"moveClassic"},heal:{name:"Heal",groupId:"adventureMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.3d315ee54e9ce845",actionTypeId:"moveClassic"},makeCamp:{name:"Make Camp",groupId:"adventureMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.30046577bc83f2f0",actionTypeId:"moveClassic"},reachYourDestination:{name:"Reach Your Destination",groupId:"adventureMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.727eb47e8f031e81",actionTypeId:"moveClassic"},resupply:{name:"Resupply",groupId:"adventureMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.8d90dd472856be27",actionTypeId:"moveClassic"},secureAnAdvantage:{name:"Secure an Advantage",groupId:"adventureMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.4dd8468e095810a4",actionTypeId:"moveClassic"},undertakeAJourney:{name:"Undertake a Journey",groupId:"adventureMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.ac19f4c7f3fe31be",actionTypeId:"moveClassic"},enterTheFray:{name:"Enter the Fray",groupId:"combatMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.ed343c963b08f301",actionTypeId:"moveClassic"},strike:{name:"Strike",groupId:"combatMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.5288e935906f6d28",actionTypeId:"moveClassic"},clash:{name:"Clash",groupId:"combatMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.7e008d0f656dc8b3",actionTypeId:"moveClassic"},battle:{name:"Battle",groupId:"combatMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.412156232a6d42bf",actionTypeId:"moveClassic"},endTheFight:{name:"End the Fight",groupId:"combatMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.aac3783710ad7499",actionTypeId:"moveClassic"},turnTheTide:{name:"Turn the Tide",groupId:"combatMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.12e23cfe23534a8f",actionTypeId:"moveClassic"},askTheOracle:{name:"Ask the Oracle",groupId:"fateMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.aba3e44b7e810c0f",actionTypeId:"moveClassic"},payThePrice:{name:"Pay the Price",groupId:"fateMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.c10d64f58dd8c5bf",actionTypeId:"moveClassic"},advance:{name:"Advance",groupId:"questMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.0151a4905d1f99d2",actionTypeId:"moveClassic"},forsakeYourVow:{name:"Forsake Your Vow",groupId:"questMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.f968f5e0a837a83a",actionTypeId:"moveClassic"},fulfillYourVow:{name:"Fulfill Your Vow",groupId:"questMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.725a21e2f02d7e12",actionTypeId:"moveClassic"},swearIronVow:{name:"Swear an Iron Vow",groupId:"questMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.010e27aa4376d4df",actionTypeId:"moveClassic"},reachMilestone:{name:"Reach a Milestone",groupId:"questMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.c3696751a921323b",actionTypeId:"moveClassic"},aidYourAlly:{name:"Aid Your Ally",groupId:"relationshipMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.f762e8f471fe875f",actionTypeId:"moveClassic"},compel:{name:"Compel",groupId:"relationshipMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.be95ca063ded2b19",actionTypeId:"moveClassic"},drawTheCircle:{name:"Draw the Circle",groupId:"relationshipMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.c0967ba47f57393b",actionTypeId:"moveClassic"},forgeABond:{name:"Forge a Bond",groupId:"relationshipMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.b643d9ea53ff8d98",actionTypeId:"moveClassic"},sojourn:{name:"Sojourn",groupId:"relationshipMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.25421995c803340e",actionTypeId:"moveClassic"},testYourBond:{name:"Test Your Bond",groupId:"relationshipMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.421b379cb40b6ab7",actionTypeId:"moveClassic"},writeYourEpilogue:{name:"Write Your Epilogue",groupId:"relationshipMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.7b51b945dad12c7d",actionTypeId:"moveClassic"},companionEndureHarm:{name:"Companion Endure Harm",groupId:"sufferMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.5042c9574d4faf61",actionTypeId:"moveClassic"},endureHarm:{name:"Endure Harm",groupId:"sufferMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.fdb51ee928b4fca2",actionTypeId:"moveClassic"},endureStress:{name:"Endure Stress",groupId:"sufferMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.e09e2fc8bb709320",actionTypeId:"moveClassic"},faceASetback:{name:"Face a Setback",groupId:"sufferMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.79661dee7726dd8c",actionTypeId:"moveClassic"},faceDeath:{name:"Face Death",groupId:"sufferMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.92b85c33a17ab487",actionTypeId:"moveClassic"},faceDesolation:{name:"Face Desolation",groupId:"sufferMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.1f978f9faa43d5c6",actionTypeId:"moveClassic"},outOfSupply:{name:"Out of Supply",groupId:"sufferMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.e599a449ce2cc52b",actionTypeId:"moveClassic"}},v={checkYourGear:{name:"Check Your Gear",groupId:"delveMoveDelve",uuid:"Compendium.foundry-ironsworn.ironsworndelvemoves.Item.48f642fd361e9c03",actionTypeId:"moveDelve"},delveTheDepths:{name:"Delve the Depths",groupId:"delveMoveDelve",uuid:"Compendium.foundry-ironsworn.ironsworndelvemoves.Item.36c6cbe556fbb639",actionTypeId:"moveDelve"},discoverASite:{name:"Discover a Site",groupId:"delveMoveDelve",uuid:"Compendium.foundry-ironsworn.ironsworndelvemoves.Item.e7ad42a1678725b9",actionTypeId:"moveDelve"},escapeTheDepths:{name:"Escape the Depths",groupId:"delveMoveDelve",uuid:"Compendium.foundry-ironsworn.ironsworndelvemoves.Item.313c82cede0ce9a7",actionTypeId:"moveDelve"},findAnOpportunity:{name:"Find an Opportunity",groupId:"delveMoveDelve",uuid:"Compendium.foundry-ironsworn.ironsworndelvemoves.Item.4da87fd54eaa1b89",actionTypeId:"moveDelve"},locateYourObjective:{name:"Locate Your Objective",groupId:"delveMoveDelve",uuid:"Compendium.foundry-ironsworn.ironsworndelvemoves.Item.2cd0d8934c6659fc",actionTypeId:"moveDelve"},revealADanger:{name:"Reveal a Danger",groupId:"delveMoveDelve",uuid:"Compendium.foundry-ironsworn.ironsworndelvemoves.Item.06f78b87b9532437",actionTypeId:"moveDelve"},revealADangerAlt:{name:"Reveal a Danger (alt)",groupId:"delveMoveDelve",uuid:"Compendium.foundry-ironsworn.ironsworndelvemoves.Item.c937a79dfda8095d",actionTypeId:"moveDelve"},learnFromYourFailures:{name:"Learn From Your Failures",groupId:"failureMoveDelve",uuid:"Compendium.foundry-ironsworn.ironsworndelvemoves.Item.d05ecfe8c467bdc5",actionTypeId:"moveDelve"},markYourFailure:{name:"Mark Your Failure",groupId:"failureMoveDelve",uuid:"Compendium.foundry-ironsworn.ironsworndelvemoves.Item.321c86f98e13f183",actionTypeId:"moveDelve"},wieldARarity:{name:"Wield a Rarity",groupId:"rarityMoveDelve",uuid:"Compendium.foundry-ironsworn.ironsworndelvemoves.Item.70c5da168f35295c",actionTypeId:"moveDelve"},advanceAThreat:{name:"Advance a Threat",groupId:"threatMoveDelve",uuid:"Compendium.foundry-ironsworn.ironsworndelvemoves.Item.03754df8933ca564",actionTypeId:"moveDelve"},takeAHiatus:{name:"Take a Hiatus",groupId:"threatMoveDelve",uuid:"Compendium.foundry-ironsworn.ironsworndelvemoves.Item.0cd7709d0a1545c9",actionTypeId:"moveDelve"}},f={aidYourAlly:{name:"Aid Your Ally",groupId:"adventureMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.f4dec946415d8e57",actionTypeId:"moveStarforged"},checkYourGear:{name:"Check Your Gear",groupId:"adventureMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.8d9830fb825057b0",actionTypeId:"moveStarforged"},compel:{name:"Compel",groupId:"adventureMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.9f538fabf8998c5b",actionTypeId:"moveStarforged"},faceDanger:{name:"Face Danger",groupId:"adventureMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.e6ed148eff82c171",actionTypeId:"moveStarforged"},gatherInformation:{name:"Gather Information",groupId:"adventureMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.13b2d777c6fb719d",actionTypeId:"moveStarforged"},secureAnAdvantage:{name:"Secure an Advantage",groupId:"adventureMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.a2d7793b23c17489",actionTypeId:"moveStarforged"},enterTheFray:{name:"Enter the Fray",groupId:"combatMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.2f2ba4090b22a122",actionTypeId:"moveStarforged"},gainGround:{name:"Gain Ground",groupId:"combatMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.3f5a834fa3fea5d1",actionTypeId:"moveStarforged"},reactUnderFire:{name:"React Under Fire",groupId:"combatMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.d9208f9b7d827aec",actionTypeId:"moveStarforged"},strike:{name:"Strike",groupId:"combatMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.ae5994ceb3cba098",actionTypeId:"moveStarforged"},clash:{name:"Clash",groupId:"combatMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.723192c97fec4fe2",actionTypeId:"moveStarforged"},takeDecisiveAction:{name:"Take Decisive Action",groupId:"combatMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.3129f4caa4754caf",actionTypeId:"moveStarforged"},faceDefeat:{name:"Face Defeat",groupId:"combatMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.23ebe48d2b1a1d58",actionTypeId:"moveStarforged"},battle:{name:"Battle",groupId:"combatMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.a903d120af3b1475",actionTypeId:"moveStarforged"},developYourRelationship:{name:"Develop Your Relationship",groupId:"connectionMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.141aec8b92efd14b",actionTypeId:"moveStarforged"},forgeABond:{name:"Forge a Bond",groupId:"connectionMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.287bb4c2b53ea847",actionTypeId:"moveStarforged"},makeAConnection:{name:"Make a Connection",groupId:"connectionMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.05909d6310d209a6",actionTypeId:"moveStarforged"},testYourRelationship:{name:"Test Your Relationship",groupId:"connectionMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.8704c945023355fb",actionTypeId:"moveStarforged"},confrontChaos:{name:"Confront Chaos",groupId:"explorationMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.6848983199a497df",actionTypeId:"moveStarforged"},exploreAWaypoint:{name:"Explore a Waypoint",groupId:"explorationMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.367804b98f30d5f4",actionTypeId:"moveStarforged"},finishAnExpedition:{name:"Finish an Expedition",groupId:"explorationMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.edac426b7c23f060",actionTypeId:"moveStarforged"},makeADiscovery:{name:"Make a Discovery",groupId:"explorationMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.75d5b0762ebab856",actionTypeId:"moveStarforged"},setACourse:{name:"Set a Course",groupId:"explorationMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.ed490d43a2533506",actionTypeId:"moveStarforged"},undertakeAnExpedition:{name:"Undertake an Expedition",groupId:"explorationMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.3ff03b51f620ab26",actionTypeId:"moveStarforged"},askTheOracle:{name:"Ask the Oracle",groupId:"fateMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.bd6278f18bbd6739",actionTypeId:"moveStarforged"},payThePrice:{name:"Pay the Price",groupId:"fateMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.78baa51694fe37c5",actionTypeId:"moveStarforged"},advance:{name:"Advance",groupId:"legacyMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.d602da2ce0c05f2c",actionTypeId:"moveStarforged"},continueALegacy:{name:"Continue a Legacy",groupId:"legacyMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.603ca607fe8386f8",actionTypeId:"moveStarforged"},earnExperience:{name:"Earn Experience",groupId:"legacyMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.9f95c215a394ebd4",actionTypeId:"moveStarforged"},forsakeYourVow:{name:"Forsake Your Vow",groupId:"questMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.449c1e260c941a40",actionTypeId:"moveStarforged"},fulfillYourVow:{name:"Fulfill Your Vow",groupId:"questMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.985a5415860a99e9",actionTypeId:"moveStarforged"},swearIronVow:{name:"Swear an Iron Vow",groupId:"questMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.9c9ab6a42daa96e0",actionTypeId:"moveStarforged"},reachMilestone:{name:"Reach a Milestone",groupId:"questMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.0d7f13818c1c19ed",actionTypeId:"moveStarforged"},heal:{name:"Heal",groupId:"recoverMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.2051538f0c9d5d27",actionTypeId:"moveStarforged"},hearten:{name:"Hearten",groupId:"recoverMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.c2c2f31f564caa06",actionTypeId:"moveStarforged"},repair:{name:"Repair",groupId:"recoverMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.eece9a67d1961f70",actionTypeId:"moveStarforged"},resupply:{name:"Resupply",groupId:"recoverMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.703964b8d02355b8",actionTypeId:"moveStarforged"},sojourn:{name:"Sojourn",groupId:"recoverMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.3de42d2d3cb78855",actionTypeId:"moveStarforged"},beginTheScene:{name:"Begin the Scene",groupId:"sceneChallengeMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.90c1db535c31ad7e",actionTypeId:"moveStarforged"},faceDangerSceneChallenge:{name:"Face Danger (Scene Challenge)",groupId:"sceneChallengeMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.7bbacec9ac8d8d09",actionTypeId:"moveStarforged"},finishTheScene:{name:"Finish the Scene",groupId:"sceneChallengeMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.0daf0460e4faa6fa",actionTypeId:"moveStarforged"},secureAnAdvantageSceneChallenge:{name:"Secure an Advantage (Scene Challenge)",groupId:"sceneChallengeMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.03595d7546a1353f",actionTypeId:"moveStarforged"},beginASession:{name:"Begin a Session",groupId:"sessionMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.bb0a732e3b1c7ea1",actionTypeId:"moveStarforged"},changeYourFate:{name:"Change Your Fate",groupId:"sessionMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.aa6aea2e2f5ce064",actionTypeId:"moveStarforged"},endASession:{name:"End a Session",groupId:"sessionMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.005fa1851e72ab46",actionTypeId:"moveStarforged"},setAFlag:{name:"Set a Flag",groupId:"sessionMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.6f3333f430a21db6",actionTypeId:"moveStarforged"},takeABreak:{name:"Take a Break",groupId:"sessionMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.fd87ca25f4f9beb2",actionTypeId:"moveStarforged"},companionTakesAHit:{name:"Companion Takes a Hit",groupId:"sufferMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.d34cdf2408cd22b6",actionTypeId:"moveStarforged"},endureHarm:{name:"Endure Harm",groupId:"sufferMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.905205c073b09eac",actionTypeId:"moveStarforged"},endureStress:{name:"Endure Stress",groupId:"sufferMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.ff32c523829d6481",actionTypeId:"moveStarforged"},loseMomentum:{name:"Lose Momentum",groupId:"sufferMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.93d2d69b7e2b85e1",actionTypeId:"moveStarforged"},sacrificeResources:{name:"Sacrifice Resources",groupId:"sufferMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.0fcfea7696d1de15",actionTypeId:"moveStarforged"},withstandDamage:{name:"Withstand Damage",groupId:"sufferMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.3782f1b3c8ca8b88",actionTypeId:"moveStarforged"},faceDeath:{name:"Face Death",groupId:"thresholdMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.0cfcd6fbaf6135d0",actionTypeId:"moveStarforged"},faceDesolation:{name:"Face Desolation",groupId:"thresholdMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.ff17e67a59539df4",actionTypeId:"moveStarforged"},overcomeDestruction:{name:"Overcome Destruction",groupId:"thresholdMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.a44ecb0d77487549",actionTypeId:"moveStarforged"}},y={undertakeAnExpedition:{name:"Undertake an Expedition",groupId:"explorationMoveSunderedIsles",uuid:"Compendium.foundry-ironsworn.sunderedislesmoves.Item.d80a8e734bed435b",actionTypeId:"moveSunderedIsles"},makeADiscovery:{name:"Make a Discovery",groupId:"explorationMoveSunderedIsles",uuid:"Compendium.foundry-ironsworn.sunderedislesmoves.Item.d5927e1450bfbbca",actionTypeId:"moveSunderedIsles"},confrontChaos:{name:"Confront Chaos",groupId:"explorationMoveSunderedIsles",uuid:"Compendium.foundry-ironsworn.sunderedislesmoves.Item.4265fe492d629800",actionTypeId:"moveSunderedIsles"},setACourse:{name:"Set a Course",groupId:"explorationMoveSunderedIsles",uuid:"Compendium.foundry-ironsworn.sunderedislesmoves.Item.7cb0a8ade5f31444",actionTypeId:"moveSunderedIsles"},enterTheFray:{name:"Enter the Fray",groupId:"combatMoveSunderedIsles",uuid:"Compendium.foundry-ironsworn.sunderedislesmoves.Item.24dfbbb42bceb9f8",actionTypeId:"moveSunderedIsles"},withstandDamage:{name:"Withstand Damage",groupId:"sufferMoveSunderedIsles",uuid:"Compendium.foundry-ironsworn.sunderedislesmoves.Item.a03a648bb3a06d93",actionTypeId:"moveSunderedIsles"},resupply:{name:"Resupply",groupId:"recoverMoveSunderedIsles",uuid:"Compendium.foundry-ironsworn.sunderedislesmoves.Item.c96bafd5cbda43bc",actionTypeId:"moveSunderedIsles"},repair:{name:"Repair",groupId:"recoverMoveSunderedIsles",uuid:"Compendium.foundry-ironsworn.sunderedislesmoves.Item.8a164fecb3029c76",actionTypeId:"moveSunderedIsles"}};let S=null;function makeid(e){let o="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t.length;let s=0;for(;s<e;)o+=t.charAt(Math.floor(Math.random()*n)),s+=1;return o}Hooks.once("tokenActionHudCoreApiReady",(async e=>{S=class ActionHandler extends e.api.ActionHandler{a;async buildSystemActions(o){if(this.actors=this.actor?[this.actor]:this._getActors(),this.actorType=this.actor?.type,"character"===this.actorType||"starship"===this.actorType||"shared"===this.actorType||"foe"===this.actorType){if(this.actor){let o=this.actor.items;o=e.api.Utils.sortItemsByName(o),this.items=o}"character"===this.actorType?this.#e():"starship"===this.actorType?this.#o():"shared"===this.actorType?this.#t():"foe"===this.actorType&&this.#n()}else this.actors=null,this.actorType=null}#e(){this.#s(),this.#r(),this.#i(),this.#a(),this.#d(),this.#m(),"ironsworn.IronswornCharacterSheetV2"!==this.actor.flags.core?.sheetClass&&this.#c()}#o(){this.#s(!1,!0),this.#a(!0)}#t(){this.#s(!0)}#n(){this.#s()}async#s(o=!1,t=!1){const n="item",r=new Map;for(const[e,o]of this.items){const t=structuredClone(o);if("bondset"===t.type&&"ironsworn.IronswornCharacterSheetV2"!==this.actor.flags.core?.sheetClass)continue;"progress"===t.type?"vow"===t.system.subtype?t.type="vow":"bond"===t.system.subtype&&(t.type="connection"):"asset"===t.type&&("Path"===t.system.category?t.type="path":"Companion"===t.system.category?t.type="companion":"Combat Talent"===t.system.category?t.type="combatTalent":"Ritual"===t.system.category?t.type="ritual":"Deed"===t.system.category?t.type="deed":"Module"===t.system.category?t.type="module":"Command Vehicle"===t.system.category?t.type="commandVehicle":"Support Vehicle"===t.system.category&&(t.type="supportVehicle"));const n=t.type,s=r.get(n)??new Map;s.set(e,t),r.set(n,s)}r.get("progress")||r.set("progress",new Map),r.get("vow")||r.set("vow",new Map),r.get("connection")||r.set("connection",new Map);for(const[a,d]of r){const r=i[a]?.groupId;if(!r)continue;const m={id:r,type:"system"},c=[...d].map((([o,t])=>{const r=o,i="bondset"===t.type?e.api.Utils.i18n("IRONSWORN.ITEMS.TypeBond"):t.name,a=e.api.Utils.i18n(s[n]),d=`${a?`${a}: `:""}${i}`,m=[n,r].join(this.delimiter);return{id:r,name:i,listName:d,encodedValue:m,info1:"progress"===t.type||"vow"===t.system.subtype||"connection"===t.type?{text:Math.floor(t.system.current/4).toString()+",¬†"+Math.floor(t.system.current%4).toString()}:"bondset"===t.type?{text:Math.floor(t.system.bonds.length/4).toString()+",¬†"+Math.floor(t.system.bonds.length%4).toString()}:"",tooltip:"progress"===t.type||"vow"===t.system.subtype||"connection"===t.type?{content:Math.floor(t.system.current/4).toString()+"¬†boxes,¬†"+Math.floor(t.system.current%4).toString()+"¬†ticks"}:"bondset"===t.type?{content:Math.floor(t.system.bonds.length/4).toString()+"¬†boxes,¬†"+Math.floor(t.system.bonds.length%4).toString()+"¬†ticks"}:""}}));if("connection"!==r&&"progress"!==r&&"vow"!==r||t)if("bondset"===r){let o=[];for(const t of c){o.push(t);const n=structuredClone(t),s="‚è≠",r="writeEpilogue",i="writeEpilogue";n.encodedValue=[r,n.id].join(this.delimiter),n.name=s,n.listName=i,n.info1="",n.tooltip={content:e.api.Utils.i18n("IRONSWORN.ProgressRoll")},n.id=`${n.id}_writeEpilogue`,o.push(n);const a={id:makeid(10),type:"system",settings:{showTitle:!1}};this.addGroup(a,m),this.addActions(o,a),o=[]}}else this.addActions(c,m);else{let t=[];for(const o of c){t.push(o);const n=structuredClone(o),s="‚èµ",r="markProgress",i="markProgress";n.encodedValue=[r,n.id].join(this.delimiter),n.name=s,n.listName=i,n.info1="",n.tooltip={content:e.api.Utils.i18n("IRONSWORN.MarkProgress")},n.id=`${n.id}_markProgress`,t.push(n);const a=structuredClone(o),d="‚è≠",c="progressRoll",u="progressRoll";a.encodedValue=[c,a.id].join(this.delimiter),a.name=d,a.listName=u,a.info1="",a.tooltip={content:e.api.Utils.i18n("IRONSWORN.ProgressRoll")},a.id=`${a.id}_progressRoll`,t.push(a);const p={id:makeid(10),type:"system",settings:{showTitle:!1}};this.addGroup(p,m),this.addActions(t,p),t=[]}if(!o||"connection"!==r){const e={id:makeid(10),type:"system",settings:{showTitle:!1}},o="<< Create new "+r+("progress"===r?" track >>":" >>"),n="new"+r,s={id:"new"+r,encodedValue:["new"+r,"new"+r].join(this.delimiter),name:o,listName:n,info1:"",tooltip:{content:"<< Create new "+r+("progress"===r?" track >>":" >>")}};t.push(s),this.addGroup(e,m),this.addActions(t,e),t=[]}}}}#r(){const o="stat",t=[];for(const n in a){const r=n,i=e.api.Utils.i18n(a[n].name).charAt(0).toUpperCase()+e.api.Utils.i18n(a[n].name).slice(1),d=e.api.Utils.i18n(s[o]),m=`${d?`${d}: `:""}${i}`,c=[o,r].join(this.delimiter),u={text:this.actor.system[n]},p={content:e.api.Utils.i18n(a[n].description)};t.push({id:r,name:i,listName:m,encodedValue:c,info1:u,tooltip:p})}this.addActions(t,{id:"stat",type:"system"})}#c(){const o="legacy",t=new Map;for(const e in d)if(d.hasOwnProperty(e)){const o=d[e],n=t.get(o.groupId)??new Map;n.set(e,o.groupId),t.set(o.groupId,n)}for(const[n,r]of t){if(!n)continue;const t={id:n,type:"system"},i=[...r].map((([t])=>{let n="",r="",i="";const a=t,m=e.api.Utils.i18n(s[o]),c=`${m?`${m}: `:""}${n}`,u=[o,a].join(this.delimiter);return"questsIncrease"===a||"bondsIncrease"===a||"discoveriesIncrease"===a?(n="‚èµ",r="",i={content:e.api.Utils.i18n("IRONSWORN.MarkProgress")}):(n=e.api.Utils.i18n(d[a].name).charAt(0).toUpperCase()+e.api.Utils.i18n(d[a].name).slice(1),r={text:Math.floor(this.actor.system?.legacies[a]/4).toString()+",¬†"+Math.floor(this.actor.system?.legacies[a]%4).toString()},i={content:Math.floor(this.actor.system?.legacies[a]/4).toString()+"¬†boxes,¬†"+Math.floor(this.actor.system?.legacies[a]%4).toString()+"¬†ticks"}),{id:a,name:n,listName:c,encodedValue:u,info1:r,tooltip:i}}));this.addActions(i,t)}}#i(){const o="meter",t=new Map;let n;n=game.settings.get("foundry-ironsworn","character-hold")?c:m;for(const e in n)if(n.hasOwnProperty(e)){const o=n[e],s=t.get(o.groupId)??new Map;s.set(e,o.groupId),t.set(o.groupId,s)}for(const[r,i]of t){if(!r)continue;const t={id:r,type:"system"},a=[...i].map((([t])=>{const r=t,i=e.api.Utils.i18n(n[r].name).charAt(0).toUpperCase()+e.api.Utils.i18n(n[r].name).slice(1),a=e.api.Utils.i18n(s[o]),d=`${a?`${a}: `:""}${i}`,m=[o,r].join(this.delimiter);let c="",u={content:e.api.Utils.i18n(n[r].description)};return"‚è¥"===n[r].name?u={content:e.api.Utils.i18n("tokenActionHud.ironsworn.decrease")}:"‚èµ"===n[r].name&&(u={content:e.api.Utils.i18n("tokenActionHud.ironsworn.increase")}),c="momentumMax"===r?{text:this.actor.system?.momentumMax?this.actor.system?.momentumMax:""}:"momentumReset"===r?{text:this.actor.system?.momentumReset?this.actor.system?.momentumReset:""}:{text:0===this.actor.system[r]?.value?"0":this.actor.system[r]?.value?this.actor.system[r]?.value:""},{id:r,name:i,listName:d,encodedValue:m,info1:c,tooltip:u}}));this.addActions(a,t)}}async#a(o){const t="impact",n=new Map;let r;r="ironsworn.IronswornCharacterSheetV2"===this.actor.flags.core?.sheetClass?p:o?l:u;for(const e in r)if(r.hasOwnProperty(e)){const o=r[e],t=n.get(o.groupId)??new Map;t.set(e,o.groupId),n.set(o.groupId,t)}for(const[o,i]of n){if(!o)continue;const n={id:o,type:"system"},a=[...i].map((([o])=>{const n=o,i=e.api.Utils.i18n(r[o].name).charAt(0).toUpperCase()+e.api.Utils.i18n(r[o].name).slice(1),a=e.api.Utils.i18n(s[t]),d=`${a?`${a}: `:""}${i}`,m=[t,n].join(this.delimiter);return{id:n,name:i,listName:d,encodedValue:m,info1:{text:this.actor.system.debility[o]?"üîò":null},tooltip:{content:e.api.Utils.i18n(r[o].description)}}}));this.addActions(a,n)}}async#d(){const o="combatPosition",t=[];for(const n in I){const r=n,i=e.api.Utils.i18n(I[n].name).charAt(0).toUpperCase()+e.api.Utils.i18n(I[n].name).slice(1),a=e.api.Utils.i18n(s[o]),d=`${a?`${a}: `:""}${i}`,m=[o,r].join(this.delimiter),c={text:this.actor.system?.combatPosition===r?"üîò":null},u={content:e.api.Utils.i18n(I[n].description)};t.push({id:r,name:i,listName:d,encodedValue:m,info1:c,tooltip:u})}this.addActions(t,{id:"combatPosition",type:"system"})}async#m(){const e=[];game.settings.get(o.ID,"ruleset-classic")&&e.push(g),game.settings.get(o.ID,"ruleset-delve")&&e.push(v),game.settings.get(o.ID,"ruleset-starforged")&&e.push(f),game.settings.get(o.ID,"ruleset-sundered_isles")&&e.push(y);for(const o of e){const e=new Map;let t=o;for(const o in t)if(t.hasOwnProperty(o)){const n=t[o],s=e.get(n.groupId)??new Map;s.set(o,n.groupId),e.set(n.groupId,s)}for(const[o,n]of e){if(!o)continue;const e={id:o,type:"system"},s=[...n].map((([e])=>{const o=e,n=t[e].name,s=t[e].actionTypeId,r=`${s?`${s}: `:""}${n}`,i=[t[e].actionTypeId,o].join(this.delimiter);return{id:o,name:n,listName:r,encodedValue:i}}));this.addActions(s,e)}}}}}));let h=null;Hooks.once("tokenActionHudCoreApiReady",(async e=>{const o=r;Object.values(o).forEach((o=>{o.name=e.api.Utils.i18n(o.name),o.listName=`Group: ${e.api.Utils.i18n(o.listName??o.name)}`}));const t=Object.values(o);h={layout:[{nestId:"asset",id:"asset",name:e.api.Utils.i18n("IRONSWORN.ITEMS.TypeAsset"),groups:[{...o.path,nestId:"asset_path"},{...o.companion,nestId:"asset_companion"},{...o.ritual,nestId:"asset_ritual"},{...o.deed,nestId:"asset_deed"},{...o.module,nestId:"asset_module"},{...o.commandVehicle,nestId:"asset_commandVehicle"},{...o.supportVehicle,nestId:"asset_supportVehicle"},{...o.combatTalent,nestId:"asset_combatTalent"}]},{nestId:"progress",id:"progress",name:e.api.Utils.i18n("IRONSWORN.ITEMS.SubtypeProgress"),groups:[{...o.progress,nestId:"progress_progress"},{...o.vow,nestId:"progress_vow"},{...o.bondset,nestId:"progress_bondset"}]},{nestId:"connection",id:"connection",name:e.api.Utils.i18n("IRONSWORN.ITEMS.SubtypeConnection"),groups:[{...o.connection,nestId:"connection_connection",settings:{showTitle:!1}}]},{nestId:"stat",id:"stat",name:e.api.Utils.i18n("IRONSWORN.Stats"),groups:[{...o.stat,nestId:"stat_stat",settings:{showTitle:!1}}]},{nestId:"meter",id:"meter",name:e.api.Utils.i18n("tokenActionHud.ironsworn.meters"),groups:[{...o.health,nestId:"meter_health",settings:{showTitle:!1}},{...o.spirit,nestId:"meter_spirit",settings:{showTitle:!1}},{...o.supply,nestId:"meter_supply",settings:{showTitle:!1}},{...o.hold,nestId:"meter_hold",settings:{showTitle:!1}},{...o.momentum,nestId:"meter_momentum",settings:{showTitle:!1}}]},{nestId:"impact",id:"impact",name:e.api.Utils.i18n("IRONSWORN.Impacts"),groups:[{...o.misfortune,nestId:"impact_misfortune"},{...o.lastingEffect,nestId:"impact_lastingEffect"},{...o.burden,nestId:"impact_burden"},{...o.vehicleTrouble,nestId:"impact_vehicleTrouble"},{...o.bane,nestId:"impact_bane"},{...o.condition,nestId:"impact_condition"}]},{nestId:"combatPosition",id:"combatPosition",name:e.api.Utils.i18n("tokenActionHud.combatPosition"),groups:[{...o.combatPosition,nestId:"combatPosition_combatPosition",settings:{showTitle:!1}}]},{nestId:"legacy",id:"legacy",name:e.api.Utils.i18n("IRONSWORN.Legacies"),groups:[{...o.quest,nestId:"legacy_quest",settings:{showTitle:!1}},{...o.bond,nestId:"legacy_bond",settings:{showTitle:!1}},{...o.discovery,nestId:"legacy_discovery",settings:{showTitle:!1}}]},{nestId:"moveClassic",id:"moveClassic",name:e.api.Utils.i18n("IRONSWORN.ITEMS.TypeMove")+" "+e.api.Utils.i18n("IRONSWORN.RULESETS.classic"),settings:{collapse:!0},groups:[{...o.adventureMoveClassic,nestId:"moveClassic_adventureMoveClassic",settings:{collapse:!0}},{...o.relationshipMoveClassic,nestId:"moveClassic_relationshipMoveClassic",settings:{collapse:!0}},{...o.combatMoveClassic,nestId:"moveClassic_combatMoveClassic",settings:{collapse:!0}},{...o.sufferMoveClassic,nestId:"moveClassic_sufferMoveClassic",settings:{collapse:!0}},{...o.questMoveClassic,nestId:"moveClassic_questMoveClassic",settings:{collapse:!0}},{...o.fateMoveClassic,nestId:"moveClassic_fateMoveClassic",settings:{collapse:!0}}]},{nestId:"moveDelve",id:"moveDelve",name:e.api.Utils.i18n("IRONSWORN.ITEMS.TypeMove")+" "+e.api.Utils.i18n("IRONSWORN.RULESETS.delve"),settings:{collapse:!0},groups:[{...o.delveMoveDelve,nestId:"moveDelve_delveMoveDelve",settings:{collapse:!0}},{...o.failureMoveDelve,nestId:"moveDelve_failureMoveDelve",settings:{collapse:!0}},{...o.threatMoveDelve,nestId:"moveDelve_threatMoveDelve",settings:{collapse:!0}},{...o.rarityMoveDelve,nestId:"moveDelve_rarityMoveDelve",settings:{collapse:!0}}]},{nestId:"moveStarforged",id:"moveStarforged",name:e.api.Utils.i18n("IRONSWORN.ITEMS.TypeMove")+" "+e.api.Utils.i18n("IRONSWORN.RULESETS.starforged"),settings:{collapse:!0},groups:[{...o.sessionMoveStarforged,nestId:"moveStarforged_sessionMoveStarforged",settings:{collapse:!0}},{...o.adventureMoveStarforged,nestId:"moveStarforged_adventureMoveStarforged",settings:{collapse:!0}},{...o.questMoveStarforged,nestId:"moveStarforged_questMoveStarforged",settings:{collapse:!0}},{...o.connectionMoveStarforged,nestId:"moveStarforged_connectionMoveStarforged",settings:{collapse:!0}},{...o.explorationMoveStarforged,nestId:"moveStarforged_explorationMoveStarforged",settings:{collapse:!0}},{...o.combatMoveStarforged,nestId:"moveStarforged_combatMoveStarforged",settings:{collapse:!0}},{...o.sufferMoveStarforged,nestId:"moveStarforged_sufferMoveStarforged",settings:{collapse:!0}},{...o.recoverMoveStarforged,nestId:"moveStarforged_recoverMoveStarforged",settings:{collapse:!0}},{...o.thresholdMoveStarforged,nestId:"moveStarforged_thresholdMoveStarforged",settings:{collapse:!0}},{...o.legacyMoveStarforged,nestId:"moveStarforged_legacyMoveStarforged",settings:{collapse:!0}},{...o.fateMoveStarforged,nestId:"moveStarforged_fateMoveStarforged",settings:{collapse:!0}},{...o.sceneChallengeMoveStarforged,nestId:"moveStarforged_sceneChallengeMoveStarforged",settings:{collapse:!0}}]},{nestId:"moveSunderedIsles",id:"moveSunderedIsles",name:e.api.Utils.i18n("IRONSWORN.ITEMS.TypeMove")+" "+e.api.Utils.i18n("IRONSWORN.RULESETS.sundered_isles"),settings:{collapse:!0},groups:[{...o.explorationMoveSunderedIsles,nestId:"moveSunderedIsles_explorationMoveSunderedIsles",settings:{collapse:!0}},{...o.combatMoveSunderedIsles,nestId:"moveSunderedIsles_combatMoveSunderedIsles",settings:{collapse:!0}},{...o.sufferMoveSunderedIsles,nestId:"moveSunderedIsles_sufferMoveSunderedIsles",settings:{collapse:!0}},{...o.recoverMoveSunderedIsles,nestId:"moveSunderedIsles_recoverMoveSunderedIsles",settings:{collapse:!0}}]},{nestId:"utility",id:"utility",name:e.api.Utils.i18n("tokenActionHud.utility"),groups:[{...o.combat,nestId:"utility_combat"},{...o.token,nestId:"utility_token"},{...o.rests,nestId:"utility_rests"},{...o.utility,nestId:"utility_utility"}]}],groups:t}}));let M=null;function register(e){}Hooks.once("tokenActionHudCoreApiReady",(async e=>{M=class RollHandler extends e.api.RollHandler{async handleActionClick(e,o){const[t,n]=o.split("|");if(["item"].includes(t)&&this.isRenderItem())return this.doRenderItem(this.actor,n);const s=["character","starship"];if(this.actor)return void await this.#u(e,this.actor,this.token,t,n);const r=canvas.tokens.controlled.filter((e=>s.includes(e.actor?.type)));for(const o of r){const s=o.actor;await this.#u(e,s,o,t,n)}}async handleActionHover(e,o){}async handleGroupClick(e,o){}async#u(e,o,t,n,s){switch(n){case"item":"progress"===o.items.get(s).type&&this.#p(e,o,s),this.#l(e,o,s);break;case"stat":this.#I(e,o,s);break;case"meter":this.#g(e,o,s);break;case"impact":this.#v(e,o,s);break;case"legacy":this.#f(e,o,s);break;case"utility":this.#y(t,s);break;case"moveClassic":case"moveDelve":case"moveStarforged":case"moveSunderedIsles":this.#S(e,o,s,n);break;case"markProgress":this.#h(e,o,s,n);break;case"progressRoll":this.#M(e,o,s,n);break;case"writeEpilogue":this.#C(e,o,s,n);break;case"newprogress":s="progress",this.#w(e,o,s,n);break;case"newvow":s="vow",this.#w(e,o,s,n);break;case"newconnection":s="bond",this.#w(e,o,s,n);break;case"combatPosition":this.#b(e,o,s)}}#p(e,o,t){o.items.get(t).sheet.render(!0)}#h(e,o,t){o.items.get(t).system.markProgress()}#M(e,o,t){o.items.get(t).system.fulfill()}async#w(e,o,t){let n,s,r;"progress"===t?(n="Progress",s="progress",r="progress"):"vow"===t?(n="Vow",s="progress",r="vow"):"bond"===t&&(n="Connection",s="progress",r="bond");const i={name:n,type:s,system:{subtype:r},sort:9e6},a=await o.items.documentClass.create(i,{parent:o});o.items.get(a.id).sheet.render(!0),await o.update({"data.items":o.items}),Hooks.call("tokenActionHudCoreApiReady",o)}#C(e,o,t){o.items.get(t).system.writeEpilogue()}async#f(e,o,t){let n,s;switch(t){case"questsIncrease":n=Math.clamp(o.system.legacies.quests+1,0,40),s={system:{legacies:{quests:n}}},await o.update(s),Hooks.call("tokenActionHudCoreApiReady",o);break;case"bondsIncrease":n=Math.clamp(o.system.legacies.bonds+1,0,40),s={system:{legacies:{bonds:n}}},await o.update(s),Hooks.call("tokenActionHudCoreApiReady",o);break;case"discoveriesIncrease":n=Math.clamp(o.system.legacies.discoveries+1,0,40),s={system:{legacies:{discoveries:n}}},await o.update(s),Hooks.call("tokenActionHudCoreApiReady",o)}}#l(e,o,t){o.items.get(t).sheet.render(!0)}#I(e,o,t){CONFIG.IRONSWORN.applications.IronswornPrerollDialog.showForStat(t,o)}async#g(e,o,t){let n,s;switch(t){case"momentum":break;case"momentumReset":o.system.burnMomentum(),Hooks.call("tokenActionHudCoreApiReady",o);break;case"momentumIncrease":n=Math.clamp(o.system.momentum.value+1,o.system.momentum.min,o.system.momentum.max),s={system:{momentum:{value:n}}},await o.update(s),Hooks.call("tokenActionHudCoreApiReady",o);break;case"momentumDecrease":n=Math.clamp(o.system.momentum.value-1,o.system.momentum.min,o.system.momentum.max),s={system:{momentum:{value:n}}},await o.update(s),Hooks.call("tokenActionHudCoreApiReady",o);break;case"healthIncrease":n=Math.clamp(o.system.health.value+1,o.system.health.min,o.system.health.max),s={system:{health:{value:n}}},await o.update(s),Hooks.call("tokenActionHudCoreApiReady",o);break;case"healthDecrease":n=Math.clamp(o.system.health.value-1,o.system.health.min,o.system.health.max),s={system:{health:{value:n}}},await o.update(s),Hooks.call("tokenActionHudCoreApiReady",o);break;case"spiritIncrease":n=Math.clamp(o.system.spirit.value+1,o.system.spirit.min,o.system.spirit.max),s={system:{spirit:{value:n}}},await o.update(s),Hooks.call("tokenActionHudCoreApiReady",o);break;case"spiritDecrease":n=Math.clamp(o.system.spirit.value-1,o.system.spirit.min,o.system.spirit.max),s={system:{spirit:{value:n}}},await o.update(s),Hooks.call("tokenActionHudCoreApiReady",o);break;case"supplyIncrease":n=Math.clamp(o.system.supply.value+1,o.system.supply.min,o.system.supply.max),s={system:{supply:{value:n}}},await o.update(s),Hooks.call("tokenActionHudCoreApiReady",o);break;case"supplyDecrease":n=Math.clamp(o.system.supply.value-1,o.system.supply.min,o.system.supply.max),s={system:{supply:{value:n}}},await o.update(s),Hooks.call("tokenActionHudCoreApiReady",o);break;case"holdIncrease":n=Math.clamp(o.system.hold.value+1,o.system.hold.min,o.system.hold.max),s={system:{hold:{value:n}}},await o.update(s),Hooks.call("tokenActionHudCoreApiReady",o);break;case"holdDecrease":n=Math.clamp(o.system.hold.value-1,o.system.hold.min,o.system.hold.max),s={system:{hold:{value:n}}},await o.update(s),Hooks.call("tokenActionHudCoreApiReady",o);break;default:CONFIG.IRONSWORN.applications.IronswornPrerollDialog.showForStat(t,o)}}async#v(e,o,t){const n={system:{debility:{[t]:!o.system.debility[t]}}};await o.update(n),Hooks.call("tokenActionHudCoreApiReady",o)}async#y(e,o){if("endTurn"===o)game.combat?.current?.tokenId===e.id&&await(game.combat?.nextTurn())}async#S(e,o,t,n){let s;switch(n){case"moveClassic":s=g;break;case"moveDelve":s=v;break;case"moveStarforged":s=f;break;case"moveSunderedIsles":s=y}o.moveSheet||=new CONFIG.IRONSWORN.applications.SFCharacterMoveSheet(o,{left:200}),await(o.moveSheet?.render(!0)),await function resolveAfterMilliseconds(){return new Promise((e=>{setTimeout((()=>{e("resolved")}),1500)}))}(),await CONFIG.IRONSWORN.emitter.emit("highlightMove",s[t].uuid)}async#b(e,o,t){const n={system:{combatPosition:t}};await o.update(n),Hooks.call("tokenActionHudCoreApiReady",o)}}}));let C=null;Hooks.once("tokenActionHudCoreApiReady",(async o=>{C=class SystemManager extends o.api.SystemManager{getActionHandler(){return new S}getAvailableRollHandlers(){return{core:"Core Ironsworn"}}getRollHandler(e){let o;return o=new M,o}async registerDefaults(){return h}registerSettings(e){}registerStyles(){return{template:{class:"tah-style-template-style",file:"tah-ironsworn",moduleId:e.ID,name:"Template Style"}}}}})),Hooks.on("tokenActionHudCoreApiReady",(async()=>{const o=game.modules.get(e.ID);o.api={requiredCoreModuleVersion:"2.0",SystemManager:C},Hooks.call("tokenActionHudSystemReady",o)}));let w=null;Hooks.once("tokenActionHudCoreApiReady",(async o=>{w=class Utils{static getSetting(t,n=null){let s=n??null;try{s=game.settings.get(e.ID,t)}catch{o.api.Logger.debug(`Setting '${t}' not found`)}return s}static async setSetting(t,n){try{n=await game.settings.set(e.ID,t,n),o.api.Logger.debug(`Setting '${t}' set to '${n}'`)}catch{o.api.Logger.debug(`Setting '${t}' not found`)}}}}));export{s as ACTION_TYPE,S as ActionHandler,I as COMBAT_POSITION,t as CORE_MODULE,h as DEFAULTS,r as GROUP,p as IMPACTS_IS,u as IMPACTS_SF,l as IMPACTS_STARSHIP,i as ITEM_TYPE,d as LEGACIES,m as METERS_IS,c as METERS_SUNDERED_ISLES,e as MODULE,o as MODULE_IRONSWORN,g as MOVES_CLASSIC,v as MOVES_DELVE,f as MOVES_STARFORGED,y as MOVES_SUNDERED_ISLES,n as REQUIRED_CORE_MODULE_VERSION,M as RollHandler,a as STATS,C as SystemManager,w as Utils,register};
