const e={ID:"token-action-hud-ironsworn"},o={ID:"foundry-ironsworn"},t={ID:"token-action-hud-core"},s="2.0",r={stat:"IRONSWORN.Stats",legacy:"IRONSWORN.Legacies",meter:"tokenActionHud.ironsworn.meters",impact:"IRONSWORN.Impacts",utility:"tokenActionHud.utility",moveClassic:"IRONSWORN.ITEMS.TypeMove IRONSWORN.RULESETS.classic",moveDelve:"IRONSWORN.ITEMS.TypeMove IRONSWORN.RULESETS.delve",moveStarforged:"IRONSWORN.ITEMS.TypeMove IRONSWORN.RULESETS.starforged",moveSunderedIsles:"IRONSWORN.ITEMS.TypeMove IRONSWORN.RULESETS.sundered_isles"},n={stat:{id:"stat",name:"IRONSWORN.Stats",type:"system"},quest:{id:"quest",name:"IRONSWORN.LEGACY.Quests",type:"system"},bond:{id:"bond",name:"IRONSWORN.LEGACY.Bonds",type:"system"},discovery:{id:"discovery",name:"IRONSWORN.LEGACY.Discoveries",type:"system"},momentum:{id:"momentum",name:"IRONSWORN.Momentum",type:"system"},health:{id:"health",name:"IRONSWORN.Health",type:"system"},spirit:{id:"spirit",name:"IRONSWORN.Spirit",type:"system"},supply:{id:"supply",name:"IRONSWORN.Supply",type:"system"},hold:{id:"hold",name:"IRONSWORN.Hold",type:"system"},progress:{id:"progress",name:"IRONSWORN.ITEMS.SubtypeProgress",type:"system"},vow:{id:"vow",name:"IRONSWORN.ITEMS.SubtypeVow",type:"system"},bondset:{id:"bondset",name:"IRONSWORN.ITEMS.TypeBond",type:"system"},connection:{id:"connection",name:"IRONSWORN.ITEMS.SubtypeConnection",type:"system"},path:{id:"path",name:"IRONSWORN.Asset Categories.Starforged.Path Assets.Title",type:"system"},companion:{id:"companion",name:"IRONSWORN.Asset Categories.Starforged.Companion Assets.Title",type:"system"},deed:{id:"deed",name:"IRONSWORN.Asset Categories.Starforged.Deed Assets.Title",type:"system"},module:{id:"module",name:"IRONSWORN.Asset Categories.Starforged.Module Assets.Title",type:"system"},supportVehicle:{id:"supportVehicle",name:"IRONSWORN.Asset Categories.Starforged.Support Vehicle Assets.Title",type:"system"},commandVehicle:{id:"commandVehicle",name:"IRONSWORN.Asset Categories.Starforged.Command Vehicle Assets.Title",type:"system"},ritual:{id:"ritual",name:"IRONSWORN.Asset Categories.Classic.Ritual Assets.Title",type:"system"},combatTalent:{id:"combatTalent",name:"IRONSWORN.Asset Categories.Classic.Combat Talent Assets.Title",type:"system"},misfortune:{id:"misfortune",name:"IRONSWORN.IMPACT.CATEGORY.Misfortunes",type:"system"},lastingEffect:{id:"lastingEffect",name:"IRONSWORN.IMPACT.CATEGORY.LastingEffects",type:"system"},burden:{id:"burden",name:"IRONSWORN.IMPACT.CATEGORY.Burdens",type:"system"},vehicleTrouble:{id:"vehicleTrouble",name:"IRONSWORN.IMPACT.CATEGORY.Vehicle",type:"system"},bane:{id:"bane",name:"IRONSWORN.DEBILITY.CATEGORY.Banes",type:"system"},condition:{id:"condition",name:"IRONSWORN.DEBILITY.CATEGORY.Conditions",type:"system"},utility:{id:"utility",name:"tokenActionHud.utility",type:"system"},sessionMoveStarforged:{id:"sessionMoveStarforged",name:"IRONSWORN.MOVES.Session Moves",type:"system"},adventureMoveStarforged:{id:"adventureMoveStarforged",name:"IRONSWORN.MOVES.Adventure Moves",type:"system"},questMoveStarforged:{id:"questMoveStarforged",name:"IRONSWORN.MOVES.Quest Moves",type:"system"},connectionMoveStarforged:{id:"connectionMoveStarforged",name:"IRONSWORN.MOVES.Connection Moves",type:"system"},explorationMoveStarforged:{id:"explorationMoveStarforged",name:"IRONSWORN.MOVES.Exploration Moves",type:"system"},combatMoveStarforged:{id:"combatMoveStarforged",name:"IRONSWORN.MOVES.Combat Moves",type:"system"},sufferMoveStarforged:{id:"sufferMoveStarforged",name:"IRONSWORN.MOVES.Suffer Moves",type:"system"},recoverMoveStarforged:{id:"recoverMoveStarforged",name:"IRONSWORN.MOVES.Recover Moves",type:"system"},thresholdMoveStarforged:{id:"thresholdMoveStarforged",name:"IRONSWORN.MOVES.Threshold Moves",type:"system"},legacyMoveStarforged:{id:"legacyMoveStarforged",name:"IRONSWORN.MOVES.Legacy Moves",type:"system"},fateMoveStarforged:{id:"fateMoveStarforged",name:"IRONSWORN.MOVES.Fate Moves",type:"system"},sceneChallengeMoveStarforged:{id:"sceneChallengeMoveStarforged",name:"IRONSWORN.MOVES.Scene Challenge Moves",type:"system"},explorationMoveSunderedIsles:{id:"explorationMoveSunderedIsles",name:"IRONSWORN.MOVES.Exploration Moves",type:"system"},combatMoveSunderedIsles:{id:"combatMoveSunderedIsles",name:"IRONSWORN.MOVES.Combat Moves",type:"system"},sufferMoveSunderedIsles:{id:"sufferMoveSunderedIsles",name:"IRONSWORN.MOVES.Suffer Moves",type:"system"},recoverMoveSunderedIsles:{id:"recoverMoveSunderedIsles",name:"IRONSWORN.MOVES.Recover Moves",type:"system"},adventureMoveClassic:{id:"adventureMoveClassic",name:"IRONSWORN.MOVES.Adventure Moves",type:"system"},relationshipMoveClassic:{id:"relationshipMoveClassic",name:"IRONSWORN.MOVES.Relationship Moves",type:"system"},combatMoveClassic:{id:"combatMoveClassic",name:"IRONSWORN.MOVES.Combat Moves",type:"system"},sufferMoveClassic:{id:"sufferMoveClassic",name:"IRONSWORN.MOVES.Suffer Moves",type:"system"},questMoveClassic:{id:"questMoveClassic",name:"IRONSWORN.MOVES.Quest Moves",type:"system"},fateMoveClassic:{id:"fateMoveClassic",name:"IRONSWORN.MOVES.Fate Moves",type:"system"},delveMoveDelve:{id:"delveMoveDelve",name:"IRONSWORN.MOVES.Delve Moves",type:"system"},failureMoveDelve:{id:"failureMoveDelve",name:"IRONSWORN.MOVES.Failure Moves",type:"system"},threatMoveDelve:{id:"threatMoveDelve",name:"IRONSWORN.MOVES.Threat Moves",type:"system"},rarityMoveDelve:{id:"rarityMoveDelve",name:"IRONSWORN.MOVES.Rarity Moves",type:"system"}},a={asset:{groupId:"asset"},progress:{groupId:"progress"},connection:{groupId:"connection"},vow:{groupId:"vow"},bondset:{groupId:"bondset"},path:{groupId:"path"},companion:{groupId:"companion"},ritual:{groupId:"ritual"},deed:{groupId:"deed"},module:{groupId:"module"},commandVehicle:{groupId:"commandVehicle"},supportVehicle:{groupId:"supportVehicle"},combatTalent:{groupId:"combatTalent"}},i={edge:"IRONSWORN.Edge",heart:"IRONSWORN.Heart",iron:"IRONSWORN.Iron",shadow:"IRONSWORN.Shadow",wits:"IRONSWORN.Wits"},d={quests:{name:"IRONSWORN.LEGACY.Quests",groupId:"quest"},questsIncrease:{name:"tokenActionHud.ironsworn.markProgress",groupId:"quest"},bonds:{name:"IRONSWORN.LEGACY.Bonds",groupId:"bond"},bondsIncrease:{name:"IRONSWORN.MarkProgress",groupId:"bond"},discoveries:{name:"IRONSWORN.LEGACY.Discoveries",groupId:"discovery"},discoveriesIncrease:{name:"IRONSWORN.MarkProgress",groupId:"discovery"}},m={healthDecrease:{name:"⏴",groupId:"health"},health:{name:"IRONSWORN.Health",groupId:"health"},healthIncrease:{name:"⏵",groupId:"health"},spiritDecrease:{name:"⏴",groupId:"spirit"},spirit:{name:"IRONSWORN.Spirit",groupId:"spirit"},spiritIncrease:{name:"⏵",groupId:"spirit"},supplyDecrease:{name:"⏴",groupId:"supply"},supply:{name:"IRONSWORN.Supply",groupId:"supply"},supplyIncrease:{name:"⏵",groupId:"supply"},momentumDecrease:{name:"⏴",groupId:"momentum"},momentum:{name:"IRONSWORN.Momentum",groupId:"momentum"},momentumIncrease:{name:"⏵",groupId:"momentum"},momentumReset:{name:"tokenActionHud.ironsworn.momentum.reset",groupId:"momentum"},momentumMax:{name:"tokenActionHud.ironsworn.momentum.max",groupId:"momentum"}},u={healthDecrease:{name:"⏴",groupId:"health"},health:{name:"IRONSWORN.Health",groupId:"health"},healthIncrease:{name:"⏵",groupId:"health"},spiritDecrease:{name:"⏴",groupId:"spirit"},spirit:{name:"IRONSWORN.Spirit",groupId:"spirit"},spiritIncrease:{name:"⏵",groupId:"spirit"},supplyDecrease:{name:"⏴",groupId:"supply"},supply:{name:"IRONSWORN.Supply",groupId:"supply"},supplyIncrease:{name:"⏵",groupId:"supply"},holdDecrease:{name:"⏴",groupId:"hold"},hold:{name:"IRONSWORN.Hold",groupId:"hold"},holdIncrease:{name:"⏵",groupId:"hold"},momentumDecrease:{name:"⏴",groupId:"momentum"},momentum:{name:"IRONSWORN.Momentum",groupId:"momentum"},momentumIncrease:{name:"⏵",groupId:"momentum"},momentumReset:{name:"tokenActionHud.ironsworn.momentum.reset",groupId:"momentum"},momentumMax:{name:"tokenActionHud.ironsworn.momentum.max",groupId:"momentum"}},c={wounded:{name:"IRONSWORN.IMPACT.Wounded",groupId:"misfortune"},shaken:{name:"IRONSWORN.IMPACT.Shaken",groupId:"misfortune"},unprepared:{name:"IRONSWORN.IMPACT.Unprepared",groupId:"misfortune"},permanentlyharmed:{name:"IRONSWORN.IMPACT.Permanentlyharmed",groupId:"lastingEffect"},traumatized:{name:"IRONSWORN.IMPACT.Traumatized",groupId:"lastingEffect"},doomed:{name:"IRONSWORN.IMPACT.Doomed",groupId:"burden"},tormented:{name:"IRONSWORN.IMPACT.Tormented",groupId:"burden"},indebted:{name:"IRONSWORN.IMPACT.Indebted",groupId:"burden"},battered:{name:"IRONSWORN.IMPACT.Battered",groupId:"vehicleTrouble"},cursed:{name:"IRONSWORN.IMPACT.Cursed",groupId:"vehicleTrouble"}},l={wounded:{name:"IRONSWORN.DEBILITY.Wounded",groupId:"condition"},unprepared:{name:"IRONSWORN.DEBILITY.Unprepared",groupId:"condition"},shaken:{name:"IRONSWORN.DEBILITY.Shaken",groupId:"condition"},encumbered:{name:"IRONSWORN.DEBILITY.Encumbered",groupId:"condition"},maimed:{name:"IRONSWORN.DEBILITY.Maimed",groupId:"bane"},corrupted:{name:"IRONSWORN.DEBILITY.Corrupted",groupId:"bane"},cursed:{name:"IRONSWORN.DEBILITY.Cursed",groupId:"burden"},tormented:{name:"IRONSWORN.DEBILITY.Tormented",groupId:"burden"}},p={battered:{name:"IRONSWORN.IMPACT.Battered",groupId:"vehicleTrouble"},cursed:{name:"IRONSWORN.IMPACT.Cursed",groupId:"vehicleTrouble"}},I={faceDanger:{name:"Face Danger",groupId:"adventureMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.c8bacc17f73d3103",actionTypeId:"moveClassic"},gatherInformation:{name:"Gather Information",groupId:"adventureMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.4244b77103f55bc4",actionTypeId:"moveClassic"},heal:{name:"Heal",groupId:"adventureMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.3d315ee54e9ce845",actionTypeId:"moveClassic"},makeCamp:{name:"Make Camp",groupId:"adventureMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.30046577bc83f2f0",actionTypeId:"moveClassic"},reachYourDestination:{name:"Reach Your Destination",groupId:"adventureMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.727eb47e8f031e81",actionTypeId:"moveClassic"},resupply:{name:"Resupply",groupId:"adventureMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.8d90dd472856be27",actionTypeId:"moveClassic"},secureAnAdvantage:{name:"Secure an Advantage",groupId:"adventureMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.4dd8468e095810a4",actionTypeId:"moveClassic"},undertakeAJourney:{name:"Undertake a Journey",groupId:"adventureMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.ac19f4c7f3fe31be",actionTypeId:"moveClassic"},enterTheFray:{name:"Enter the Fray",groupId:"combatMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.ed343c963b08f301",actionTypeId:"moveClassic"},strike:{name:"Strike",groupId:"combatMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.5288e935906f6d28",actionTypeId:"moveClassic"},clash:{name:"Clash",groupId:"combatMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.7e008d0f656dc8b3",actionTypeId:"moveClassic"},battle:{name:"Battle",groupId:"combatMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.412156232a6d42bf",actionTypeId:"moveClassic"},endTheFight:{name:"End the Fight",groupId:"combatMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.aac3783710ad7499",actionTypeId:"moveClassic"},turnTheTide:{name:"Turn the Tide",groupId:"combatMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.12e23cfe23534a8f",actionTypeId:"moveClassic"},askTheOracle:{name:"Ask the Oracle",groupId:"fateMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.aba3e44b7e810c0f",actionTypeId:"moveClassic"},payThePrice:{name:"Pay the Price",groupId:"fateMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.c10d64f58dd8c5bf",actionTypeId:"moveClassic"},advance:{name:"Advance",groupId:"questMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.0151a4905d1f99d2",actionTypeId:"moveClassic"},forsakeYourVow:{name:"Forsake Your Vow",groupId:"questMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.f968f5e0a837a83a",actionTypeId:"moveClassic"},fulfillYourVow:{name:"Fulfill Your Vow",groupId:"questMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.725a21e2f02d7e12",actionTypeId:"moveClassic"},swearIronVow:{name:"Swear an Iron Vow",groupId:"questMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.010e27aa4376d4df",actionTypeId:"moveClassic"},reachMilestone:{name:"Reach a Milestone",groupId:"questMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.c3696751a921323b",actionTypeId:"moveClassic"},aidYourAlly:{name:"Aid Your Ally",groupId:"relationshipMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.f762e8f471fe875f",actionTypeId:"moveClassic"},compel:{name:"Compel",groupId:"relationshipMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.be95ca063ded2b19",actionTypeId:"moveClassic"},drawTheCircle:{name:"Draw the Circle",groupId:"relationshipMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.c0967ba47f57393b",actionTypeId:"moveClassic"},forgeABond:{name:"Forge a Bond",groupId:"relationshipMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.b643d9ea53ff8d98",actionTypeId:"moveClassic"},sojourn:{name:"Sojourn",groupId:"relationshipMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.25421995c803340e",actionTypeId:"moveClassic"},testYourBond:{name:"Test Your Bond",groupId:"relationshipMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.421b379cb40b6ab7",actionTypeId:"moveClassic"},writeYourEpilogue:{name:"Write Your Epilogue",groupId:"relationshipMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.7b51b945dad12c7d",actionTypeId:"moveClassic"},companionEndureHarm:{name:"Companion Endure Harm",groupId:"sufferMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.5042c9574d4faf61",actionTypeId:"moveClassic"},endureHarm:{name:"Endure Harm",groupId:"sufferMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.fdb51ee928b4fca2",actionTypeId:"moveClassic"},endureStress:{name:"Endure Stress",groupId:"sufferMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.e09e2fc8bb709320",actionTypeId:"moveClassic"},faceASetback:{name:"Face a Setback",groupId:"sufferMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.79661dee7726dd8c",actionTypeId:"moveClassic"},faceDeath:{name:"Face Death",groupId:"sufferMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.92b85c33a17ab487",actionTypeId:"moveClassic"},faceDesolation:{name:"Face Desolation",groupId:"sufferMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.1f978f9faa43d5c6",actionTypeId:"moveClassic"},outOfSupply:{name:"Out of Supply",groupId:"sufferMoveClassic",uuid:"Compendium.foundry-ironsworn.ironswornmoves.Item.e599a449ce2cc52b",actionTypeId:"moveClassic"}},g={checkYourGear:{name:"Check Your Gear",groupId:"delveMoveDelve",uuid:"Compendium.foundry-ironsworn.ironsworndelvemoves.Item.48f642fd361e9c03",actionTypeId:"moveDelve"},delveTheDepths:{name:"Delve the Depths",groupId:"delveMoveDelve",uuid:"Compendium.foundry-ironsworn.ironsworndelvemoves.Item.36c6cbe556fbb639",actionTypeId:"moveDelve"},discoverASite:{name:"Discover a Site",groupId:"delveMoveDelve",uuid:"Compendium.foundry-ironsworn.ironsworndelvemoves.Item.e7ad42a1678725b9",actionTypeId:"moveDelve"},escapeTheDepths:{name:"Escape the Depths",groupId:"delveMoveDelve",uuid:"Compendium.foundry-ironsworn.ironsworndelvemoves.Item.313c82cede0ce9a7",actionTypeId:"moveDelve"},findAnOpportunity:{name:"Find an Opportunity",groupId:"delveMoveDelve",uuid:"Compendium.foundry-ironsworn.ironsworndelvemoves.Item.4da87fd54eaa1b89",actionTypeId:"moveDelve"},locateYourObjective:{name:"Locate Your Objective",groupId:"delveMoveDelve",uuid:"Compendium.foundry-ironsworn.ironsworndelvemoves.Item.2cd0d8934c6659fc",actionTypeId:"moveDelve"},revealADanger:{name:"Reveal a Danger",groupId:"delveMoveDelve",uuid:"Compendium.foundry-ironsworn.ironsworndelvemoves.Item.06f78b87b9532437",actionTypeId:"moveDelve"},revealADangerAlt:{name:"Reveal a Danger (alt)",groupId:"delveMoveDelve",uuid:"Compendium.foundry-ironsworn.ironsworndelvemoves.Item.c937a79dfda8095d",actionTypeId:"moveDelve"},learnFromYourFailures:{name:"Learn From Your Failures",groupId:"failureMoveDelve",uuid:"Compendium.foundry-ironsworn.ironsworndelvemoves.Item.d05ecfe8c467bdc5",actionTypeId:"moveDelve"},markYourFailure:{name:"Mark Your Failure",groupId:"failureMoveDelve",uuid:"Compendium.foundry-ironsworn.ironsworndelvemoves.Item.321c86f98e13f183",actionTypeId:"moveDelve"},wieldARarity:{name:"Wield a Rarity",groupId:"rarityMoveDelve",uuid:"Compendium.foundry-ironsworn.ironsworndelvemoves.Item.70c5da168f35295c",actionTypeId:"moveDelve"},advanceAThreat:{name:"Advance a Threat",groupId:"threatMoveDelve",uuid:"Compendium.foundry-ironsworn.ironsworndelvemoves.Item.03754df8933ca564",actionTypeId:"moveDelve"},takeAHiatus:{name:"Take a Hiatus",groupId:"threatMoveDelve",uuid:"Compendium.foundry-ironsworn.ironsworndelvemoves.Item.0cd7709d0a1545c9",actionTypeId:"moveDelve"}},v={aidYourAlly:{name:"Aid Your Ally",groupId:"adventureMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.f4dec946415d8e57",actionTypeId:"moveStarforged"},checkYourGear:{name:"Check Your Gear",groupId:"adventureMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.8d9830fb825057b0",actionTypeId:"moveStarforged"},compel:{name:"Compel",groupId:"adventureMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.9f538fabf8998c5b",actionTypeId:"moveStarforged"},faceDanger:{name:"Face Danger",groupId:"adventureMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.e6ed148eff82c171",actionTypeId:"moveStarforged"},gatherInformation:{name:"Gather Information",groupId:"adventureMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.13b2d777c6fb719d",actionTypeId:"moveStarforged"},secureAnAdvantage:{name:"Secure an Advantage",groupId:"adventureMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.a2d7793b23c17489",actionTypeId:"moveStarforged"},enterTheFray:{name:"Enter the Fray",groupId:"combatMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.2f2ba4090b22a122",actionTypeId:"moveStarforged"},gainGround:{name:"Gain Ground",groupId:"combatMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.3f5a834fa3fea5d1",actionTypeId:"moveStarforged"},reactUnderFire:{name:"React Under Fire",groupId:"combatMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.d9208f9b7d827aec",actionTypeId:"moveStarforged"},strike:{name:"Strike",groupId:"combatMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.ae5994ceb3cba098",actionTypeId:"moveStarforged"},clash:{name:"Clash",groupId:"combatMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.723192c97fec4fe2",actionTypeId:"moveStarforged"},takeDecisiveAction:{name:"Take Decisive Action",groupId:"combatMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.3129f4caa4754caf",actionTypeId:"moveStarforged"},faceDefeat:{name:"Face Defeat",groupId:"combatMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.23ebe48d2b1a1d58",actionTypeId:"moveStarforged"},battle:{name:"Battle",groupId:"combatMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.a903d120af3b1475",actionTypeId:"moveStarforged"},developYourRelationship:{name:"Develop Your Relationship",groupId:"connectionMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.141aec8b92efd14b",actionTypeId:"moveStarforged"},forgeABond:{name:"Forge a Bond",groupId:"connectionMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.287bb4c2b53ea847",actionTypeId:"moveStarforged"},makeAConnection:{name:"Make a Connection",groupId:"connectionMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.05909d6310d209a6",actionTypeId:"moveStarforged"},testYourRelationship:{name:"Test Your Relationship",groupId:"connectionMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.8704c945023355fb",actionTypeId:"moveStarforged"},confrontChaos:{name:"Confront Chaos",groupId:"explorationMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.6848983199a497df",actionTypeId:"moveStarforged"},exploreAWaypoint:{name:"Explore a Waypoint",groupId:"explorationMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.367804b98f30d5f4",actionTypeId:"moveStarforged"},finishAnExpedition:{name:"Finish an Expedition",groupId:"explorationMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.edac426b7c23f060",actionTypeId:"moveStarforged"},makeADiscovery:{name:"Make a Discovery",groupId:"explorationMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.75d5b0762ebab856",actionTypeId:"moveStarforged"},setACourse:{name:"Set a Course",groupId:"explorationMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.ed490d43a2533506",actionTypeId:"moveStarforged"},undertakeAnExpedition:{name:"Undertake an Expedition",groupId:"explorationMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.3ff03b51f620ab26",actionTypeId:"moveStarforged"},askTheOracle:{name:"Ask the Oracle",groupId:"fateMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.bd6278f18bbd6739",actionTypeId:"moveStarforged"},payThePrice:{name:"Pay the Price",groupId:"fateMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.78baa51694fe37c5",actionTypeId:"moveStarforged"},advance:{name:"Advance",groupId:"legacyMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.d602da2ce0c05f2c",actionTypeId:"moveStarforged"},continueALegacy:{name:"Continue a Legacy",groupId:"legacyMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.603ca607fe8386f8",actionTypeId:"moveStarforged"},earnExperience:{name:"Earn Experience",groupId:"legacyMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.9f95c215a394ebd4",actionTypeId:"moveStarforged"},forsakeYourVow:{name:"Forsake Your Vow",groupId:"questMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.449c1e260c941a40",actionTypeId:"moveStarforged"},fulfillYourVow:{name:"Fulfill Your Vow",groupId:"questMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.985a5415860a99e9",actionTypeId:"moveStarforged"},swearIronVow:{name:"Swear an Iron Vow",groupId:"questMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.9c9ab6a42daa96e0",actionTypeId:"moveStarforged"},reachMilestone:{name:"Reach a Milestone",groupId:"questMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.0d7f13818c1c19ed",actionTypeId:"moveStarforged"},heal:{name:"Heal",groupId:"recoverMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.2051538f0c9d5d27",actionTypeId:"moveStarforged"},hearten:{name:"Hearten",groupId:"recoverMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.c2c2f31f564caa06",actionTypeId:"moveStarforged"},repair:{name:"Repair",groupId:"recoverMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.eece9a67d1961f70",actionTypeId:"moveStarforged"},resupply:{name:"Resupply",groupId:"recoverMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.703964b8d02355b8",actionTypeId:"moveStarforged"},sojourn:{name:"Sojourn",groupId:"recoverMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.3de42d2d3cb78855",actionTypeId:"moveStarforged"},beginTheScene:{name:"Begin the Scene",groupId:"sceneChallengeMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.90c1db535c31ad7e",actionTypeId:"moveStarforged"},faceDangerSceneChallenge:{name:"Face Danger (Scene Challenge)",groupId:"sceneChallengeMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.7bbacec9ac8d8d09",actionTypeId:"moveStarforged"},finishTheScene:{name:"Finish the Scene",groupId:"sceneChallengeMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.0daf0460e4faa6fa",actionTypeId:"moveStarforged"},secureAnAdvantageSceneChallenge:{name:"Secure an Advantage (Scene Challenge)",groupId:"sceneChallengeMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.03595d7546a1353f",actionTypeId:"moveStarforged"},beginASession:{name:"Begin a Session",groupId:"sessionMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.bb0a732e3b1c7ea1",actionTypeId:"moveStarforged"},changeYourFate:{name:"Change Your Fate",groupId:"sessionMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.aa6aea2e2f5ce064",actionTypeId:"moveStarforged"},endASession:{name:"End a Session",groupId:"sessionMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.005fa1851e72ab46",actionTypeId:"moveStarforged"},setAFlag:{name:"Set a Flag",groupId:"sessionMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.6f3333f430a21db6",actionTypeId:"moveStarforged"},takeABreak:{name:"Take a Break",groupId:"sessionMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.fd87ca25f4f9beb2",actionTypeId:"moveStarforged"},companionTakesAHit:{name:"Companion Takes a Hit",groupId:"sufferMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.d34cdf2408cd22b6",actionTypeId:"moveStarforged"},endureHarm:{name:"Endure Harm",groupId:"sufferMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.905205c073b09eac",actionTypeId:"moveStarforged"},endureStress:{name:"Endure Stress",groupId:"sufferMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.ff32c523829d6481",actionTypeId:"moveStarforged"},loseMomentum:{name:"Lose Momentum",groupId:"sufferMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.93d2d69b7e2b85e1",actionTypeId:"moveStarforged"},sacrificeResources:{name:"Sacrifice Resources",groupId:"sufferMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.0fcfea7696d1de15",actionTypeId:"moveStarforged"},withstandDamage:{name:"Withstand Damage",groupId:"sufferMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.3782f1b3c8ca8b88",actionTypeId:"moveStarforged"},faceDeath:{name:"Face Death",groupId:"thresholdMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.0cfcd6fbaf6135d0",actionTypeId:"moveStarforged"},faceDesolation:{name:"Face Desolation",groupId:"thresholdMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.ff17e67a59539df4",actionTypeId:"moveStarforged"},overcomeDestruction:{name:"Overcome Destruction",groupId:"thresholdMoveStarforged",uuid:"Compendium.foundry-ironsworn.starforgedmoves.Item.a44ecb0d77487549",actionTypeId:"moveStarforged"}},f={undertakeAnExpedition:{name:"Undertake an Expedition",groupId:"explorationMoveSunderedIsles",uuid:"Compendium.foundry-ironsworn.sunderedislesmoves.Item.d80a8e734bed435b",actionTypeId:"moveSunderedIsles"},makeADiscovery:{name:"Make a Discovery",groupId:"explorationMoveSunderedIsles",uuid:"Compendium.foundry-ironsworn.sunderedislesmoves.Item.d5927e1450bfbbca",actionTypeId:"moveSunderedIsles"},confrontChaos:{name:"Confront Chaos",groupId:"explorationMoveSunderedIsles",uuid:"Compendium.foundry-ironsworn.sunderedislesmoves.Item.4265fe492d629800",actionTypeId:"moveSunderedIsles"},setACourse:{name:"Set a Course",groupId:"explorationMoveSunderedIsles",uuid:"Compendium.foundry-ironsworn.sunderedislesmoves.Item.7cb0a8ade5f31444",actionTypeId:"moveSunderedIsles"},enterTheFray:{name:"Enter the Fray",groupId:"combatMoveSunderedIsles",uuid:"Compendium.foundry-ironsworn.sunderedislesmoves.Item.24dfbbb42bceb9f8",actionTypeId:"moveSunderedIsles"},withstandDamage:{name:"Withstand Damage",groupId:"sufferMoveSunderedIsles",uuid:"Compendium.foundry-ironsworn.sunderedislesmoves.Item.a03a648bb3a06d93",actionTypeId:"moveSunderedIsles"},resupply:{name:"Resupply",groupId:"recoverMoveSunderedIsles",uuid:"Compendium.foundry-ironsworn.sunderedislesmoves.Item.c96bafd5cbda43bc",actionTypeId:"moveSunderedIsles"},repair:{name:"Repair",groupId:"recoverMoveSunderedIsles",uuid:"Compendium.foundry-ironsworn.sunderedislesmoves.Item.8a164fecb3029c76",actionTypeId:"moveSunderedIsles"}};let y=null;function makeid(e){let o="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=t.length;let r=0;for(;r<e;)o+=t.charAt(Math.floor(Math.random()*s)),r+=1;return o}Hooks.once("tokenActionHudCoreApiReady",(async e=>{y=class ActionHandler extends e.api.ActionHandler{a;async buildSystemActions(o){if(this.actors=this.actor?[this.actor]:this._getActors(),this.actorType=this.actor?.type,"character"===this.actorType||"starship"===this.actorType||"shared"===this.actorType||"foe"===this.actorType){if(this.actor){let o=this.actor.items;o=e.api.Utils.sortItemsByName(o),this.items=o}"character"===this.actorType?this.#e():"starship"===this.actorType?this.#o():"shared"===this.actorType?this.#t():"foe"===this.actorType&&this.#s()}else this.actors=null,this.actorType=null}#e(){this.#r(),this.#n(),this.#a(),this.#i(),this.#d(),"ironsworn.IronswornCharacterSheetV2"!==this.actor.flags.core?.sheetClass&&this.#m()}#o(){this.#r(!1,!0),this.#i(!0)}#t(){this.#r(!0)}#s(){this.#r()}async#r(o=!1,t=!1){const s="item",n=new Map;for(const[e,o]of this.items){const t=structuredClone(o);if("bondset"===t.type&&"ironsworn.IronswornCharacterSheetV2"!==this.actor.flags.core?.sheetClass)continue;"progress"===t.type?"vow"===t.system.subtype?t.type="vow":"bond"===t.system.subtype&&(t.type="connection"):"asset"===t.type&&("Path"===t.system.category?t.type="path":"Companion"===t.system.category?t.type="companion":"Combat Talent"===t.system.category?t.type="combatTalent":"Ritual"===t.system.category?t.type="ritual":"Deed"===t.system.category?t.type="deed":"Module"===t.system.category?t.type="module":"Command Vehicle"===t.system.category?t.type="commandVehicle":"Support Vehicle"===t.system.category&&(t.type="supportVehicle"));const s=t.type,r=n.get(s)??new Map;r.set(e,t),n.set(s,r)}n.get("progress")||n.set("progress",new Map),n.get("vow")||n.set("vow",new Map),n.get("connection")||n.set("connection",new Map);for(const[i,d]of n){const n=a[i]?.groupId;if(!n)continue;const m={id:n,type:"system"},u=[...d].map((([o,t])=>{const n=o,a="bondset"===t.type?e.api.Utils.i18n("IRONSWORN.ITEMS.TypeBond"):t.name,i=e.api.Utils.i18n(r[s]),d=`${i?`${i}: `:""}${a}`,m=[s,n].join(this.delimiter);return{id:n,name:a,listName:d,encodedValue:m,info1:"progress"===t.type||"vow"===t.system.subtype||"connection"===t.type?{text:Math.floor(t.system.current/4).toString()+", "+Math.floor(t.system.current%4).toString()}:"bondset"===t.type?{text:Math.floor(t.system.bonds.length/4).toString()+", "+Math.floor(t.system.bonds.length%4).toString()}:"",tooltip:"progress"===t.type||"vow"===t.system.subtype||"connection"===t.type?{content:Math.floor(t.system.current/4).toString()+" boxes, "+Math.floor(t.system.current%4).toString()+" ticks"}:"bondset"===t.type?{content:Math.floor(t.system.bonds.length/4).toString()+" boxes, "+Math.floor(t.system.bonds.length%4).toString()+" ticks"}:""}}));if("connection"!==n&&"progress"!==n&&"vow"!==n||t)if("bondset"===n){let o=[];for(const t of u){o.push(t);const s=structuredClone(t),r="⏭",n="writeEpilogue",a="writeEpilogue";s.encodedValue=[n,s.id].join(this.delimiter),s.name=r,s.listName=a,s.info1="",s.tooltip={content:e.api.Utils.i18n("IRONSWORN.ProgressRoll")},s.id=`${s.id}_writeEpilogue`,o.push(s);const i={id:makeid(10),type:"system",settings:{showTitle:!1}};this.addGroup(i,m),this.addActions(o,i),o=[]}}else this.addActions(u,m);else{let t=[];for(const o of u){t.push(o);const s=structuredClone(o),r="⏵",n="markProgress",a="markProgress";s.encodedValue=[n,s.id].join(this.delimiter),s.name=r,s.listName=a,s.info1="",s.tooltip={content:e.api.Utils.i18n("IRONSWORN.MarkProgress")},s.id=`${s.id}_markProgress`,t.push(s);const i=structuredClone(o),d="⏭",u="progressRoll",c="progressRoll";i.encodedValue=[u,i.id].join(this.delimiter),i.name=d,i.listName=c,i.info1="",i.tooltip={content:e.api.Utils.i18n("IRONSWORN.ProgressRoll")},i.id=`${i.id}_progressRoll`,t.push(i);const l={id:makeid(10),type:"system",settings:{showTitle:!1}};this.addGroup(l,m),this.addActions(t,l),t=[]}if(!o||"connection"!==n){const e={id:makeid(10),type:"system",settings:{showTitle:!1}},o="<< Create new "+n+("progress"===n?" track >>":" >>"),s="new"+n,r={id:"new"+n,encodedValue:["new"+n,"new"+n].join(this.delimiter),name:o,listName:s,info1:"",tooltip:{content:"<< Create new "+n+("progress"===n?" track >>":" >>")}};t.push(r),this.addGroup(e,m),this.addActions(t,e),t=[]}}}}#n(){const o="stat",t=[];for(const s in i){const n=s,a=e.api.Utils.i18n(i[s]).charAt(0).toUpperCase()+e.api.Utils.i18n(i[s]).slice(1),d=e.api.Utils.i18n(r[o]),m=`${d?`${d}: `:""}${a}`,u=[o,n].join(this.delimiter),c={text:this.actor.system[s]};t.push({id:n,name:a,listName:m,encodedValue:u,info1:c})}this.addActions(t,{id:"stat",type:"system"})}#m(){const o="legacy",t=new Map;for(const e in d)if(d.hasOwnProperty(e)){const o=d[e],s=t.get(o.groupId)??new Map;s.set(e,o.groupId),t.set(o.groupId,s)}for(const[s,n]of t){if(!s)continue;const t={id:s,type:"system"},a=[...n].map((([t])=>{let s="",n="",a="";const i=t,m=e.api.Utils.i18n(r[o]),u=`${m?`${m}: `:""}${s}`,c=[o,i].join(this.delimiter);return"questsIncrease"===i||"bondsIncrease"===i||"discoveriesIncrease"===i?(s="⏵",n="",a={content:e.api.Utils.i18n("IRONSWORN.MarkProgress")}):(s=e.api.Utils.i18n(d[i].name).charAt(0).toUpperCase()+e.api.Utils.i18n(d[i].name).slice(1),n={text:Math.floor(this.actor.system?.legacies[i]/4).toString()+", "+Math.floor(this.actor.system?.legacies[i]%4).toString()},a={content:Math.floor(this.actor.system?.legacies[i]/4).toString()+" boxes, "+Math.floor(this.actor.system?.legacies[i]%4).toString()+" ticks"}),{id:i,name:s,listName:u,encodedValue:c,info1:n,tooltip:a}}));this.addActions(a,t)}}#a(){const o="meter",t=new Map;let s;s=game.settings.get("foundry-ironsworn","character-hold")?u:m;for(const e in s)if(s.hasOwnProperty(e)){const o=s[e],r=t.get(o.groupId)??new Map;r.set(e,o.groupId),t.set(o.groupId,r)}for(const[n,a]of t){if(!n)continue;const t={id:n,type:"system"},i=[...a].map((([t])=>{const n=t,a=e.api.Utils.i18n(s[n].name).charAt(0).toUpperCase()+e.api.Utils.i18n(s[n].name).slice(1),i=e.api.Utils.i18n(r[o]),d=`${i?`${i}: `:""}${a}`,m=[o,n].join(this.delimiter);let u="",c="";return"⏴"===s[n].name?c={content:e.api.Utils.i18n("tokenActionHud.ironsworn.decrease")}:"⏵"===s[n].name&&(c={content:e.api.Utils.i18n("tokenActionHud.ironsworn.increase")}),u="momentumMax"===n?{text:this.actor.system?.momentumMax?this.actor.system?.momentumMax:""}:"momentumReset"===n?{text:this.actor.system?.momentumReset?this.actor.system?.momentumReset:""}:{text:0===this.actor.system[n]?.value?"0":this.actor.system[n]?.value?this.actor.system[n]?.value:""},{id:n,name:a,listName:d,encodedValue:m,info1:u,tooltip:c}}));this.addActions(i,t)}}async#i(o){const t="impact",s=new Map;let n;n="ironsworn.IronswornCharacterSheetV2"===this.actor.flags.core?.sheetClass?l:o?p:c;for(const e in n)if(n.hasOwnProperty(e)){const o=n[e],t=s.get(o.groupId)??new Map;t.set(e,o.groupId),s.set(o.groupId,t)}for(const[o,a]of s){if(!o)continue;const s={id:o,type:"system"},i=[...a].map((([o])=>{const s=o,a=e.api.Utils.i18n(n[o].name).charAt(0).toUpperCase()+e.api.Utils.i18n(n[o].name).slice(1),i=e.api.Utils.i18n(r[t]),d=`${i?`${i}: `:""}${a}`,m=[t,s].join(this.delimiter);return{id:s,name:a,listName:d,encodedValue:m,info1:{text:this.actor.system.debility[o]?"🔘":null}}}));this.addActions(i,s)}}async#d(){const e=[];game.settings.get(o.ID,"ruleset-classic")&&e.push(I),game.settings.get(o.ID,"ruleset-delve")&&e.push(g),game.settings.get(o.ID,"ruleset-starforged")&&e.push(v),game.settings.get(o.ID,"ruleset-sundered_isles")&&e.push(f);for(const o of e){const e=new Map;let t=o;for(const o in t)if(t.hasOwnProperty(o)){const s=t[o],r=e.get(s.groupId)??new Map;r.set(o,s.groupId),e.set(s.groupId,r)}for(const[o,s]of e){if(!o)continue;const e={id:o,type:"system"},r=[...s].map((([e])=>{const o=e,s=t[e].name,r=t[e].actionTypeId,n=`${r?`${r}: `:""}${s}`,a=[t[e].actionTypeId,o].join(this.delimiter);return{id:o,name:s,listName:n,encodedValue:a}}));this.addActions(r,e)}}}}}));let S=null;Hooks.once("tokenActionHudCoreApiReady",(async e=>{const o=n;Object.values(o).forEach((o=>{o.name=e.api.Utils.i18n(o.name),o.listName=`Group: ${e.api.Utils.i18n(o.listName??o.name)}`}));const t=Object.values(o);S={layout:[{nestId:"asset",id:"asset",name:e.api.Utils.i18n("IRONSWORN.ITEMS.TypeAsset"),groups:[{...o.path,nestId:"asset_path"},{...o.companion,nestId:"asset_companion"},{...o.ritual,nestId:"asset_ritual"},{...o.deed,nestId:"asset_deed"},{...o.module,nestId:"asset_module"},{...o.commandVehicle,nestId:"asset_commandVehicle"},{...o.supportVehicle,nestId:"asset_supportVehicle"},{...o.combatTalent,nestId:"asset_combatTalent"}]},{nestId:"progress",id:"progress",name:e.api.Utils.i18n("IRONSWORN.ITEMS.SubtypeProgress"),groups:[{...o.progress,nestId:"progress_progress"},{...o.vow,nestId:"progress_vow"},{...o.bondset,nestId:"progress_bondset"}]},{nestId:"connection",id:"connection",name:e.api.Utils.i18n("IRONSWORN.ITEMS.SubtypeConnection"),groups:[{...o.connection,nestId:"connection_connection",settings:{showTitle:!1}}]},{nestId:"stat",id:"stat",name:e.api.Utils.i18n("IRONSWORN.Stats"),groups:[{...o.stat,nestId:"stat_stat",settings:{showTitle:!1}}]},{nestId:"meter",id:"meter",name:e.api.Utils.i18n("tokenActionHud.ironsworn.meters"),groups:[{...o.health,nestId:"meter_health",settings:{showTitle:!1}},{...o.spirit,nestId:"meter_spirit",settings:{showTitle:!1}},{...o.supply,nestId:"meter_supply",settings:{showTitle:!1}},{...o.hold,nestId:"meter_hold",settings:{showTitle:!1}},{...o.momentum,nestId:"meter_momentum",settings:{showTitle:!1}}]},{nestId:"impact",id:"impact",name:e.api.Utils.i18n("IRONSWORN.Impacts"),groups:[{...o.misfortune,nestId:"impact_misfortune"},{...o.lastingEffect,nestId:"impact_lastingEffect"},{...o.burden,nestId:"impact_burden"},{...o.vehicleTrouble,nestId:"impact_vehicleTrouble"},{...o.bane,nestId:"impact_bane"},{...o.condition,nestId:"impact_condition"}]},{nestId:"legacy",id:"legacy",name:e.api.Utils.i18n("IRONSWORN.Legacies"),groups:[{...o.quest,nestId:"legacy_quest",settings:{showTitle:!1}},{...o.bond,nestId:"legacy_bond",settings:{showTitle:!1}},{...o.discovery,nestId:"legacy_discovery",settings:{showTitle:!1}}]},{nestId:"moveClassic",id:"moveClassic",name:e.api.Utils.i18n("IRONSWORN.ITEMS.TypeMove")+" "+e.api.Utils.i18n("IRONSWORN.RULESETS.classic"),settings:{collapse:!0},groups:[{...o.adventureMoveClassic,nestId:"moveClassic_adventureMoveClassic",settings:{collapse:!0}},{...o.relationshipMoveClassic,nestId:"moveClassic_relationshipMoveClassic",settings:{collapse:!0}},{...o.combatMoveClassic,nestId:"moveClassic_combatMoveClassic",settings:{collapse:!0}},{...o.sufferMoveClassic,nestId:"moveClassic_sufferMoveClassic",settings:{collapse:!0}},{...o.questMoveClassic,nestId:"moveClassic_questMoveClassic",settings:{collapse:!0}},{...o.fateMoveClassic,nestId:"moveClassic_fateMoveClassic",settings:{collapse:!0}}]},{nestId:"moveDelve",id:"moveDelve",name:e.api.Utils.i18n("IRONSWORN.ITEMS.TypeMove")+" "+e.api.Utils.i18n("IRONSWORN.RULESETS.delve"),settings:{collapse:!0},groups:[{...o.delveMoveDelve,nestId:"moveDelve_delveMoveDelve",settings:{collapse:!0}},{...o.failureMoveDelve,nestId:"moveDelve_failureMoveDelve",settings:{collapse:!0}},{...o.threatMoveDelve,nestId:"moveDelve_threatMoveDelve",settings:{collapse:!0}},{...o.rarityMoveDelve,nestId:"moveDelve_rarityMoveDelve",settings:{collapse:!0}}]},{nestId:"moveStarforged",id:"moveStarforged",name:e.api.Utils.i18n("IRONSWORN.ITEMS.TypeMove")+" "+e.api.Utils.i18n("IRONSWORN.RULESETS.starforged"),settings:{collapse:!0},groups:[{...o.sessionMoveStarforged,nestId:"moveStarforged_sessionMoveStarforged",settings:{collapse:!0}},{...o.adventureMoveStarforged,nestId:"moveStarforged_adventureMoveStarforged",settings:{collapse:!0}},{...o.questMoveStarforged,nestId:"moveStarforged_questMoveStarforged",settings:{collapse:!0}},{...o.connectionMoveStarforged,nestId:"moveStarforged_connectionMoveStarforged",settings:{collapse:!0}},{...o.explorationMoveStarforged,nestId:"moveStarforged_explorationMoveStarforged",settings:{collapse:!0}},{...o.combatMoveStarforged,nestId:"moveStarforged_combatMoveStarforged",settings:{collapse:!0}},{...o.sufferMoveStarforged,nestId:"moveStarforged_sufferMoveStarforged",settings:{collapse:!0}},{...o.recoverMoveStarforged,nestId:"moveStarforged_recoverMoveStarforged",settings:{collapse:!0}},{...o.thresholdMoveStarforged,nestId:"moveStarforged_thresholdMoveStarforged",settings:{collapse:!0}},{...o.legacyMoveStarforged,nestId:"moveStarforged_legacyMoveStarforged",settings:{collapse:!0}},{...o.fateMoveStarforged,nestId:"moveStarforged_fateMoveStarforged",settings:{collapse:!0}},{...o.sceneChallengeMoveStarforged,nestId:"moveStarforged_sceneChallengeMoveStarforged",settings:{collapse:!0}}]},{nestId:"moveSunderedIsles",id:"moveSunderedIsles",name:e.api.Utils.i18n("IRONSWORN.ITEMS.TypeMove")+" "+e.api.Utils.i18n("IRONSWORN.RULESETS.sundered_isles"),settings:{collapse:!0},groups:[{...o.explorationMoveSunderedIsles,nestId:"moveSunderedIsles_explorationMoveSunderedIsles",settings:{collapse:!0}},{...o.combatMoveSunderedIsles,nestId:"moveSunderedIsles_combatMoveSunderedIsles",settings:{collapse:!0}},{...o.sufferMoveSunderedIsles,nestId:"moveSunderedIsles_sufferMoveSunderedIsles",settings:{collapse:!0}},{...o.recoverMoveSunderedIsles,nestId:"moveSunderedIsles_recoverMoveSunderedIsles",settings:{collapse:!0}}]},{nestId:"utility",id:"utility",name:e.api.Utils.i18n("tokenActionHud.utility"),groups:[{...o.combat,nestId:"utility_combat"},{...o.token,nestId:"utility_token"},{...o.rests,nestId:"utility_rests"},{...o.utility,nestId:"utility_utility"}]}],groups:t}}));let h=null;function register(e){}Hooks.once("tokenActionHudCoreApiReady",(async e=>{h=class RollHandler extends e.api.RollHandler{async handleActionClick(e,o){const[t,s]=o.split("|");if(["item"].includes(t)&&this.isRenderItem())return this.doRenderItem(this.actor,s);const r=["character","starship"];if(this.actor)return void await this.#u(e,this.actor,this.token,t,s);const n=canvas.tokens.controlled.filter((e=>r.includes(e.actor?.type)));for(const o of n){const r=o.actor;await this.#u(e,r,o,t,s)}}async handleActionHover(e,o){}async handleGroupClick(e,o){}async#u(e,o,t,s,r){switch(s){case"item":"progress"===o.items.get(r).type&&this.#c(e,o,r),this.#l(e,o,r);break;case"stat":this.#p(e,o,r);break;case"meter":this.#I(e,o,r);break;case"impact":this.#g(e,o,r);break;case"legacy":this.#v(e,o,r);break;case"utility":this.#f(t,r);break;case"moveClassic":case"moveDelve":case"moveStarforged":case"moveSunderedIsles":this.#y(e,o,r,s);break;case"markProgress":this.#S(e,o,r,s);break;case"progressRoll":this.#h(e,o,r,s);break;case"writeEpilogue":this.#M(e,o,r,s);break;case"newprogress":r="progress",this.#C(e,o,r,s);break;case"newvow":r="vow",this.#C(e,o,r,s);break;case"newconnection":r="bond",this.#C(e,o,r,s)}}#c(e,o,t){o.items.get(t).sheet.render(!0)}#S(e,o,t){o.items.get(t).system.markProgress()}#h(e,o,t){o.items.get(t).system.fulfill()}async#C(e,o,t){let s,r,n;"progress"===t?(s="Progress",r="progress",n="progress"):"vow"===t?(s="Vow",r="progress",n="vow"):"bond"===t&&(s="Connection",r="progress",n="bond");const a={name:s,type:r,system:{subtype:n},sort:9e6},i=await o.items.documentClass.create(a,{parent:o});o.items.get(i.id).sheet.render(!0),await o.update({"data.items":o.items}),Hooks.call("tokenActionHudCoreApiReady",o)}#M(e,o,t){o.items.get(t).system.writeEpilogue()}async#v(e,o,t){let s,r;switch(t){case"questsIncrease":s=Math.clamp(o.system.legacies.quests+1,0,40),r={system:{legacies:{quests:s}}},await o.update(r),Hooks.call("tokenActionHudCoreApiReady",o);break;case"bondsIncrease":s=Math.clamp(o.system.legacies.bonds+1,0,40),r={system:{legacies:{bonds:s}}},await o.update(r),Hooks.call("tokenActionHudCoreApiReady",o);break;case"discoveriesIncrease":s=Math.clamp(o.system.legacies.discoveries+1,0,40),r={system:{legacies:{discoveries:s}}},await o.update(r),Hooks.call("tokenActionHudCoreApiReady",o)}}#l(e,o,t){o.items.get(t).sheet.render(!0)}#p(e,o,t){CONFIG.IRONSWORN.applications.IronswornPrerollDialog.showForStat(t,o)}async#I(e,o,t){let s,r;switch(t){case"momentum":break;case"momentumReset":o.system.burnMomentum(),Hooks.call("tokenActionHudCoreApiReady",o);break;case"momentumIncrease":s=Math.clamp(o.system.momentum.value+1,o.system.momentum.min,o.system.momentum.max),r={system:{momentum:{value:s}}},await o.update(r),Hooks.call("tokenActionHudCoreApiReady",o);break;case"momentumDecrease":s=Math.clamp(o.system.momentum.value-1,o.system.momentum.min,o.system.momentum.max),r={system:{momentum:{value:s}}},await o.update(r),Hooks.call("tokenActionHudCoreApiReady",o);break;case"healthIncrease":s=Math.clamp(o.system.health.value+1,o.system.health.min,o.system.health.max),r={system:{health:{value:s}}},await o.update(r),Hooks.call("tokenActionHudCoreApiReady",o);break;case"healthDecrease":s=Math.clamp(o.system.health.value-1,o.system.health.min,o.system.health.max),r={system:{health:{value:s}}},await o.update(r),Hooks.call("tokenActionHudCoreApiReady",o);break;case"spiritIncrease":s=Math.clamp(o.system.spirit.value+1,o.system.spirit.min,o.system.spirit.max),r={system:{spirit:{value:s}}},await o.update(r),Hooks.call("tokenActionHudCoreApiReady",o);break;case"spiritDecrease":s=Math.clamp(o.system.spirit.value-1,o.system.spirit.min,o.system.spirit.max),r={system:{spirit:{value:s}}},await o.update(r),Hooks.call("tokenActionHudCoreApiReady",o);break;case"supplyIncrease":s=Math.clamp(o.system.supply.value+1,o.system.supply.min,o.system.supply.max),r={system:{supply:{value:s}}},await o.update(r),Hooks.call("tokenActionHudCoreApiReady",o);break;case"supplyDecrease":s=Math.clamp(o.system.supply.value-1,o.system.supply.min,o.system.supply.max),r={system:{supply:{value:s}}},await o.update(r),Hooks.call("tokenActionHudCoreApiReady",o);break;case"holdIncrease":s=Math.clamp(o.system.hold.value+1,o.system.hold.min,o.system.hold.max),r={system:{hold:{value:s}}},await o.update(r),Hooks.call("tokenActionHudCoreApiReady",o);break;case"holdDecrease":s=Math.clamp(o.system.hold.value-1,o.system.hold.min,o.system.hold.max),r={system:{hold:{value:s}}},await o.update(r),Hooks.call("tokenActionHudCoreApiReady",o);break;default:CONFIG.IRONSWORN.applications.IronswornPrerollDialog.showForStat(t,o)}}async#g(e,o,t){const s={system:{debility:{[t]:!o.system.debility[t]}}};await o.update(s),Hooks.call("tokenActionHudCoreApiReady",o)}async#f(e,o){if("endTurn"===o)game.combat?.current?.tokenId===e.id&&await(game.combat?.nextTurn())}async#y(e,o,t,s){let r;switch(s){case"moveClassic":r=I;break;case"moveDelve":r=g;break;case"moveStarforged":r=v;break;case"moveSunderedIsles":r=f}o.moveSheet||=new CONFIG.IRONSWORN.applications.SFCharacterMoveSheet(o,{left:200}),await(o.moveSheet?.render(!0)),await function resolveAfterMilliseconds(){return new Promise((e=>{setTimeout((()=>{e("resolved")}),1500)}))}(),await CONFIG.IRONSWORN.emitter.emit("highlightMove",r[t].uuid)}}}));let M=null;Hooks.once("tokenActionHudCoreApiReady",(async o=>{M=class SystemManager extends o.api.SystemManager{getActionHandler(){return new y}getAvailableRollHandlers(){return{core:"Core Ironsworn"}}getRollHandler(e){let o;return o=new h,o}async registerDefaults(){return S}registerSettings(e){}registerStyles(){return{template:{class:"tah-style-template-style",file:"tah-ironsworn",moduleId:e.ID,name:"Template Style"}}}}})),Hooks.on("tokenActionHudCoreApiReady",(async()=>{const o=game.modules.get(e.ID);o.api={requiredCoreModuleVersion:"2.0",SystemManager:M},Hooks.call("tokenActionHudSystemReady",o)}));let C=null;Hooks.once("tokenActionHudCoreApiReady",(async o=>{C=class Utils{static getSetting(t,s=null){let r=s??null;try{r=game.settings.get(e.ID,t)}catch{o.api.Logger.debug(`Setting '${t}' not found`)}return r}static async setSetting(t,s){try{s=await game.settings.set(e.ID,t,s),o.api.Logger.debug(`Setting '${t}' set to '${s}'`)}catch{o.api.Logger.debug(`Setting '${t}' not found`)}}}}));export{r as ACTION_TYPE,y as ActionHandler,t as CORE_MODULE,S as DEFAULTS,n as GROUP,l as IMPACTS_IS,c as IMPACTS_SF,p as IMPACTS_STARSHIP,a as ITEM_TYPE,d as LEGACIES,m as METERS_IS,u as METERS_SUNDERED_ISLES,e as MODULE,o as MODULE_IRONSWORN,I as MOVES_CLASSIC,g as MOVES_DELVE,v as MOVES_STARFORGED,f as MOVES_SUNDERED_ISLES,s as REQUIRED_CORE_MODULE_VERSION,h as RollHandler,i as STATS,M as SystemManager,C as Utils,register};
